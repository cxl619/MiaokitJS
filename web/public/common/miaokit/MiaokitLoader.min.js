var MiaokitModule=function(a,b){if(a===void 0){a={m_bUnity:true,m_pUnityPath:undefined,m_pModulePath:undefined,m_pServer:undefined}}if(b===void 0){b="WWW.YONGTOC.COM"}var c=this;c["m_pEngine"]=a.m_bUnity?"Unity":"Sisyphus";c["m_pEnginePath"]=a.m_pUnityPath;c["m_pModulePath"]=a.m_pModulePath;c["m_pServer"]=a.m_pServer;c["m_pID"]=b;c["Merge"](c)};var MiaokitMerge=function(d){var e=[];d["Merge"]=d["Merge"]||function(f){for(var g=0,h=e;g<h.length;g++){var i=h[g];var j=i(f);if(j){for(var k=0,l=j;k<l.length;k++){var m=l[k];f[m._name]=m}}}};return function(n){e.push(n)}}(MiaokitModule.prototype);MiaokitMerge(function(o){var p=undefined;var q=undefined;var r={};var s=function(u,v){if(v===void 0){v=undefined}var w=0;this.length=u(-1);this[Symbol.iterator]=function(){return{next:function(){var x=u(w);if(x){var y=p(x);w=v?w+1:y.m_nObject;return{value:y,done:false}}return{value:undefined,done:true}}}}};r["Transform"]=function(z){Object.defineProperty(z,"position",{get:function(){var A=this["_GetPosition"]()/4;var B=o["WASM"].HEAPF32();return{x:B[A],y:B[A+1],z:B[A+2]}},set:function(C){this["_SetPosition"](C.x,C.y,C.z)}});Object.defineProperty(z,"euler",{get:function(){var D=this["_GetEuler"]()/4;var E=o["WASM"].HEAPF32();return{x:E[D],y:E[D+1],z:E[D+2]}},set:function(F){this["_SetEuler"](F.x,F.y,F.z)}});Object.defineProperty(z,"rotation",{get:function(){var G=this["_GetRotation"]()/4;var H=o["WASM"].HEAPF32();return{x:H[G],y:H[G+1],z:H[G+2],w:H[G+3]}},set:function(I){this["_SetRotation"](I.x,I.y,I.z,I.w)}});Object.defineProperty(z,"scale",{get:function(){var J=this["_GetScale"]()/4;var K=o["WASM"].HEAPF32();return{x:K[J],y:K[J+1],z:K[J+2]}},set:function(L){this["_SetScale"](L.x,L.y,L.z)}});Object.defineProperty(z,"localPosition",{get:function(){var M=this["_GetLocalPosition"]()/4;var N=o["WASM"].HEAPF32();return{x:N[M],y:N[M+1],z:N[M+2]}},set:function(O){this["_SetLocalPosition"](O.x,O.y,O.z)}});Object.defineProperty(z,"localEuler",{get:function(){var P=this["_GetLocalEuler"]()/4;var Q=o["WASM"].HEAPF32();return{x:Q[P],y:Q[P+1],z:Q[P+2]}},set:function(R){this["_SetLocalEuler"](R.x,R.y,R.z)}});Object.defineProperty(z,"localRotation",{get:function(){var S=this["_GetLocalRotation"]()/4;var T=o["WASM"].HEAPF32();return{x:T[S],y:T[S+1],z:T[S+2],w:T[S+3]}},set:function(U){this["_SetLocalRotation"](U.x,U.y,U.z,U.w)}});Object.defineProperty(z,"localScale",{get:function(){var V=this["_GetLocalScale"]()/4;var W=o["WASM"].HEAPF32();return{x:W[V],y:W[V+1],z:W[V+2]}},set:function(X){this["_SetLocalScale"](X.x,X.y,X.z)}});Object.defineProperty(z,"right",{get:function(){var Y=this["_GetRight"]()/4;var Z=o["WASM"].HEAPF32();return{x:Z[Y],y:Z[Y+1],z:Z[Y+2]}},set:function($){this["_SetRight"]($.x,$.y,$.z)}});Object.defineProperty(z,"up",{get:function(){var _=this["_GetUp"]()/4;var aa=o["WASM"].HEAPF32();return{x:aa[_],y:aa[_+1],z:aa[_+2]}},set:function(){var ba=this["_SetUp"]()/4;var ca=o["WASM"].HEAPF32();return{x:ca[ba],y:ca[ba+1],z:ca[ba+2]}}});Object.defineProperty(z,"forward",{get:function(){var da=this["_GetForward"]()/4;var ea=o["WASM"].HEAPF32();return{x:ea[da],y:ea[da+1],z:ea[da+2]}},set:function(){var fa=this["_SetForward"]()/4;var ga=o["WASM"].HEAPF32();return{x:ga[fa],y:ga[fa+1],z:ga[fa+2]}}});z["Rotate"]=function(ha,ia){this["_Rotate"](ha.x,ha.y,ha.z,ia)};z["Rotate2"]=function(ja,ka,la){this["_Rotate2"](ja.x,ja.y,ja.z,ka,la)};z["Translate"]=function(ma,na){this["_Translate"](ma.x,ma.y,ma.z,na)};z["TransformPoint"]=function(oa){var pa=this["_TransformPoint"](oa.x,oa.y,oa.z)/4;var qa=o["WASM"].HEAPF32();return{x:qa[pa],y:qa[pa+1],z:qa[pa+2]}}};r["GameObject"]=function(ra){Object.defineProperty(ra,"name",{get:function(){if(!this._name){var sa=this._GetName(0);var ta=this._GetName(1);this._name=o["WASM"].GetString(ta,sa)}return this._name}});Object.defineProperty(ra,"transform",{get:function(){return p(this["_GetTransform"]())}});Object.defineProperty(ra,"mesh",{get:function(){return p(this["_GetMesh"]())},set:function(ua){this["_SetMesh"](ua.m_nObject)}});Object.defineProperty(ra,"children",{get:function(){var va=this;return new s(function(wa){return va._IterChild(wa)},true)}});Object.defineProperty(ra,"parent",{get:function(){return p(this["_GetParent"]())}});Object.defineProperty(ra,"data",{get:function(){return p(this["_GetUserData"]())},set:function(xa){}});Object.defineProperty(ra,"enableCollider",{set:function(ya){this["_EnableCollider"](ya)}});Object.defineProperty(ra,"active",{set:function(za){this["_Active"](za)}});Object.defineProperty(ra,"highlight",{set:function(Aa){this["_Highlight"](Aa)}});ra["Destory"]=function(){this["_Destory"]()};o["GameObject"]=function(){return p(ra._GameObject())}};r["Miaokit"]=function(Ba){Ba["LoadTile"]=function(Ca){var Da=this["_Malloc"](Ca.byteLength);if(Da){o["WASM"]["HEAPU8"](Da,Ca.byteLength).set(new Uint8Array(Ca));var Ea=this["_LoadTile"](Da,Ca.byteLength);var Fa=p(Ea);return Fa}return null};Ba["Analyze"]=function(Ga){var Ha=this["_Analyze"]();var Ia=o["WASM"].HEAP32()[Ha/4];var Ja=o["WASM"].GetString(Ha+4,Ia);try{var Ka=JSON.parse(Ja);var La=q(Ga).concat(Ka);return La}catch(Ma){console.log(Ja)}return null};Ba["PickEntity"]=function(Na){return p(this["_PickEntity"](Na))};Ba["GetScene"]=function(Oa){return p(this["_GetScene"](Oa))};Ba["WorldToScreenPoint"]=function(Pa){var Qa=this["_WorldToScreenPoint"](Pa.x,Pa.y,Pa.z)/4;var Ra=o["WASM"].HEAPF32();return{x:Ra[Qa],y:Ra[Qa+1],z:Ra[Qa+2]}};Ba["ScreenPointToRay"]=function(Sa){var Ta=this["_ScreenPointToRay"](Sa.x,Sa.y,Sa.z)/4;var Ua=o["WASM"].HEAPF32();return{m_mOrigin:{x:Ua[Ta],y:Ua[Ta+1],z:Ua[Ta+2]},m_mDirection:{x:Ua[Ta+4],y:Ua[Ta+5],z:Ua[Ta+6]}}};Object.defineProperty(Ba,"camera",{get:function(){return p(this["_GetCamera"]())}});Object.defineProperty(Ba,"gis",{get:function(){if(!this._gis){this._gis=r["Gis"]["g_pIns"]}return this._gis}});Object.defineProperty(Ba,"progress",{get:function(){return this["_GetProgress"]()}})};r["Mesh"]=function(Va){Va["SetVertices"]=function(Wa,Xa){this["m_aVertex"]=this["m_aVertex"]||[];this["m_aVertex"].push({m_pArray:Xa,m_nSlot:this["_SlotLut"][Wa],m_nItemSize:this["_SizeLut"][Wa]})};Va["SetIndices"]=function(Ya,Za,$a){this["m_aIndex"]=this["m_aIndex"]||[];this["m_aIndex"][Ya]={m_pArray:Za,m_nItemSize:$a}};Va["Apply"]=function(){var _a=this["m_aVertex"];var ab=this["m_aIndex"];if(!_a||!ab){return}var bb=2+2*_a.length+3*ab.length;var cb=this._CreateBuffer(bb);var db=o["WASM"]["HEAP32"](cb,bb*4);var eb=0;db[eb++]=_a.length;db[eb++]=ab.length;for(var fb=0;fb<_a.length;fb++){db[eb++]=_a[fb].m_nSlot;db[eb++]=_a[fb].m_pArray.length/_a[fb].m_nItemSize}for(var fb=0;fb<ab.length;fb++){db[eb++]=0;db[eb++]=0;db[eb++]=ab[fb].m_pArray.length}this._CreateBuffer(0);for(var fb=0;fb<_a.length;fb++){var gb=_a[fb].m_pArray;var hb=this._GetVertexBuffer(fb);var ib=o["WASM"]["HEAPF32"](hb,gb.length*4);ib.set(gb)}for(var fb=0;fb<ab.length;fb++){var gb=ab[fb].m_pArray;var hb=this._GetIndexBuffer(fb);var ib=o["WASM"]["HEAP32"](hb,gb.length*4);ib.set(gb)}this._Apply();this["m_aVertex"]=undefined;this["m_aIndex"]=undefined};Va["_SlotLut"]={position:0,normal:1,uv:2,color:3,tangent:4,uv2:9,uv3:10,uv4:11,uv5:12,uv6:13,uv7:14,uv8:15};Va["_SizeLut"]={position:3,normal:3,uv:2,color:4,tangent:4,uv2:2,uv3:2,uv4:2,uv5:2,uv6:2,uv7:2,uv8:2};Object.defineProperty(Va,"position",{set:function(jb){this.SetVertices("position",jb)}});Object.defineProperty(Va,"normal",{set:function(kb){this.SetVertices("normal",kb)}});Object.defineProperty(Va,"uv",{set:function(lb){this.SetVertices("uv",lb)}});Object.defineProperty(Va,"triangles",{set:function(mb){this.SetIndices(0,mb)}});Object.defineProperty(Va,"material",{set:function(nb){this.SetMaterial(0,nb)}});o["Mesh"]=function(){return p(Va._Mesh())}};r["Texture2D"]=function(ob){ob["SetImageData"]=function(pb){var qb=this._CreateBuffer(pb.byteLength);if(qb){o["WASM"]["HEAPU8"](qb,pb.byteLength).set(new Uint8Array(pb));this._Apply()}};ob["Load"]=function(rb){var sb=this;o["Fetch"](rb,function(tb){if(tb){sb.SetImageData(tb)}})};o["Texture2D"]=function(ub){var vb=p(ob._Texture2D());if(ub){if("string"===typeof ub){this.Load(ub)}else{this.SetImageData(ub)}}return vb}};r["Material"]=function(wb){if("Sisyphus"===o["m_pEngine"]){o["ShaderLab"].ExpandMaterial(wb)}wb["GetTexture"]=function(){return p(this["_GetTexture"]())};wb["SetTexture"]=function(xb){this["_SetTexture"](xb.m_nObject)};o["Material"]=function(yb){if(yb===void 0){yb=undefined}var zb=null;if(yb){var Ab=o["ShaderLab"]["Pipeline"]["InternalShader"];var Bb=Ab[0];Ab[0]=yb;zb=p(wb._Material());Ab[0]=Bb}else{zb=p(wb._Material())}return zb}};r["Tile"]=function(Cb){Object.defineProperty(Cb,"scenes",{get:function(){var Db=this;return new s(function(Eb){return Db._IterWork(Eb)})}})};r["Scene"]=function(Fb){Fb["GetLayer"]=function(Gb){return p(this["_GetLayer"](Gb))};Object.defineProperty(Fb,"id",{get:function(){if(!this._id){var Hb=this._GetID(0);var Ib=this._GetID(1);this._id=o["WASM"].GetString(Ib,Hb)}return this._id}});Object.defineProperty(Fb,"layers",{get:function(){var Jb=this;return new s(function(Kb){return Jb._IterLayer(Kb)})}});Object.defineProperty(Fb,"object3D",{get:function(){if(undefined===this._object3D){var Lb=this._GetObject(this.m_nObject);if(0===Lb){this._object3D=null;return null}this._object3D=p(Lb)}return this._object3D}});Object.defineProperty(Fb,"viewState",{get:function(){return{m_mTarget:{x:0,y:0,z:0},m_nPitch:45,m_nYaw:0,m_nDistance:60,m_mOrthoTarget:{x:0,y:0,z:0},m_nOrthoScaled:0,m_nOrthoRotate:0}}});Object.defineProperty(Fb,"binding",{get:function(){return p(this._GetBinding())}})};r["Layer"]=function(Mb){Object.defineProperty(Mb,"id",{get:function(){if(!this._id){var Nb=this._GetID(0);var Ob=this._GetID(1);this._id=o["WASM"].GetString(Ob,Nb)}return this._id}});Object.defineProperty(Mb,"sites",{get:function(){var Pb=this;return new s(function(Qb){return Pb._IterSite(Qb)})}});Object.defineProperty(Mb,"object3D",{get:function(){if(undefined===this._object3D){var Rb=this._GetObject(this.m_nObject);if(0===Rb){this._object3D=null;return null}this._object3D=p(Rb)}return this._object3D}});Object.defineProperty(Mb,"viewState",{get:function(){var Sb=this["_GetViewState"]();if(0<Sb){var Tb=o["WASM"]["HEAPF32"](Sb,4*11);var Ub=0;return{m_mTarget:{x:Tb[Ub++],y:Tb[Ub++],z:Tb[Ub++]},m_nPitch:Tb[Ub++],m_nYaw:Tb[Ub++],m_nDistance:Tb[Ub++],m_mOrthoTarget:{x:Tb[Ub++],y:Tb[Ub++],z:Tb[Ub++]},m_nOrthoScaled:Tb[Ub++],m_nOrthoRotate:Tb[Ub++]}}return null}})};r["Attachment"]=function(Vb){Object.defineProperty(Vb,"entityType",{get:function(){return this._GetEntityType()}});Object.defineProperty(Vb,"secondType",{get:function(){return this._GetSecondType()}});Object.defineProperty(Vb,"flag",{get:function(){return this._GetFlag()}});Object.defineProperty(Vb,"object3D",{get:function(){return p(this._GetObject())}});Object.defineProperty(Vb,"viewState",{get:function(){var Wb=this["_GetViewState"]();if(0<Wb){var Xb=o["WASM"]["HEAPF32"](Wb,4*11);var Yb=0;var Zb={m_mTarget:{x:Xb[Yb++],y:Xb[Yb++],z:Xb[Yb++]},m_nPitch:Xb[Yb++],m_nYaw:Xb[Yb++],m_nDistance:Xb[Yb++],m_mOrthoTarget:{x:Xb[Yb++],y:Xb[Yb++],z:Xb[Yb++]},m_nOrthoScaled:Xb[Yb++],m_nOrthoRotate:Xb[Yb++]};console.log("attachment view:",Zb);return Zb}else{console.log("attachment view: null")}return null}})};r["Site"]=function($b){Object.defineProperty($b,"id",{get:function(){if(!this._id){var _b=this._GetID(0);var ac=this._GetID(1);this._id=o["WASM"].GetString(ac,_b)}return this._id}});Object.defineProperty($b,"layer",{get:function(){return p(this["_Layer"]())}});Object.defineProperty($b,"scene",{get:function(){return p(this["_Scene"]())}});Object.defineProperty($b,"type",{get:function(){return this["_Type"]()}});Object.defineProperty($b,"number",{get:function(){return this["_Number"]()}});Object.defineProperty($b,"position",{get:function(){var bc=this["_Position"]()/4;var cc=o["WASM"].HEAPF32();return{x:cc[bc],y:cc[bc+1],z:cc[bc+2]}}})};r["Prefab"]=function(dc){dc["Instantiate"]=function(){return p(this["_Instantiate"]())};o["LoadPrefab"]=function(ec,fc){o["Fetch"](ec,function(gc){var hc=null;if(gc){var ic=dc._Prefab();var jc=p(ic);var kc=jc.CreateBuffer(gc.byteLength);if(kc){o["WASM"]["HEAPU8"](kc,gc.byteLength).set(new Uint8Array(gc));jc.Apply();hc=jc}}fc(hc)})}};r["Gis"]=function(lc){lc["Update"]=function(mc,nc,oc){return this["_Update"](mc,nc,oc)};lc["AddSvetile"]=function(pc){var qc=o["WASM"]["EncodeString"](pc.m_pUrl);var rc=this["_CreateSvetileDesc"](qc.byteLength);var sc=o["WASM"]["HEAPU32"](rc,4*8);sc[0]=pc.m_nID;sc[1]=pc.m_nFlags;o["WASM"]["HEAPU8"](sc[2],qc.byteLength).set(qc,0);sc[3]=0;sc[4]=o["WASM"]["RegisterDelegate"](function(uc,vc){pc.OnActive(p(uc),0<vc)});var tc=o["WASM"]["HEAPF32"](rc+20,16);tc[0]=pc.m_mLngLat.x;tc[1]=pc.m_mLngLat.y;tc[2]=pc.m_mSize.x;tc[3]=pc.m_mSize.y;this["_AddSvetile"](rc)};lc["AddMapbox"]=function(wc){var xc=this["_GetMapboxDesc"]();var yc=o["WASM"]["HEAPF32"](xc,40);yc[0]=wc.m_mOffset.x;yc[1]=wc.m_mOffset.y;yc[2]=wc.m_mOffset.z;yc[3]=wc.m_mScale.x;yc[4]=wc.m_mScale.y;yc[5]=wc.m_mScale.z;yc[6]=wc.m_mLngLat.x;yc[7]=wc.m_mLngLat.y;yc[8]=wc.m_mSize.x;yc[9]=wc.m_mSize.y;this["_AddMapbox"](xc)};lc["AddGameObject"]=function(zc,Ac,Bc){this["_AddGameObject"](zc.m_nObject,Ac,Bc)};Object.defineProperty(lc,"imageServer",{set:function(Cc){if(!Cc){Cc="http://t%d.tianditu.gov.cn/DataServer?T=vec_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var Dc=this["_GetServer"](0);o["WASM"].SetString(Dc,Cc)}});Object.defineProperty(lc,"terrainServer",{set:function(Ec){if(!Ec){Ec="https://t%d.tianditu.gov.cn/dem_sjk/DataServer?T=ele_c&tk=fb14b0853d59b619e18c259898bd0d4d&x=%d&y=%d&l=%d"}var Fc=this["_GetServer"](1);o["WASM"].SetString(Fc,Ec)}})};r["Dioramas3MX"]=function(Gc){Gc["_Load3MX"]=function(Hc,Ic,Jc){var Kc=this;var Lc=Kc.m_pFileLut[Hc];var Mc=Lc.m_pPath+Lc.m_aFile[Ic];o["Request"]("GET","arraybuffer",Mc,null,null,function(Nc){if(!Nc){return}var Oc=new Uint32Array(Nc,0,2);if(1113083187===Oc[0]){var Pc=Oc[1]>>8;var Qc=9+Pc;var Rc=Nc.byteLength-Qc;var Sc=new Uint8Array(Nc,9,Pc);var Tc=Kc.m_pTextDecoder.decode(Sc);var Uc=JSON.parse(Tc);var Vc={m_pPath:Mc.substring(0,Mc.lastIndexOf("/")+1),m_aFile:[]};var Wc=[];var Xc=[];var Yc=Uc.resources;var Zc=0;for(var $c=0;$c<Yc.length;$c++){Wc.push($c);if("textureBuffer"===Yc[$c].type){Wc.push(0);Xc.push($c);if("jpg"===Yc[$c].format){Wc.push(0)}else if("png"===Yc[$c].format){Wc.push(1)}else{Wc.push(1e4)}}else if("geometryBuffer"===Yc[$c].type){Wc.push(1);if("ctm"===Yc[$c].format){Wc.push(0)}else{Wc.push(1e4)}}else{Wc.push(1e4);Wc.push(1e4)}Wc.push(Yc[$c].size);Wc.push(Zc);Zc+=Yc[$c].size;Wc.push(1e4);if(Yc[$c].texture){for(var _c=0;_c<Yc.length;_c++){if(Yc[$c].texture===Yc[_c].id){Wc[Wc.length-1]=_c;break}}}}var ad=[];var bd=Uc.nodes;for(var $c=0;$c<bd.length;$c++){var cd=bd[$c];var dd=cd.bbMax[0]-cd.bbMin[0];var ed=cd.bbMax[1]-cd.bbMin[1];var fd=cd.bbMax[2]-cd.bbMin[2];var gd=Math.sqrt(dd*dd+ed*ed+fd*fd);ad.push(Math.floor(parseInt(cd.bbMin[0]+cd.bbMax[0])*.5*100));ad.push(Math.floor(parseInt(cd.bbMin[1]+cd.bbMax[1])*.5*100));ad.push(Math.floor(parseInt(cd.bbMin[2]+cd.bbMax[2])*.5*100));ad.push(Math.floor(gd*100));ad.push(Math.floor(cd.maxScreenDiameter));var hd=cd.children?cd.children.length:0;if(0<hd){ad.push(Vc.m_aFile.length);for(var _c=0;_c<hd;_c++){Vc.m_aFile.push(cd.children[_c])}ad.push(Vc.m_aFile.length)}else{ad.push(-1);ad.push(-1)}var id=cd.resources?cd.resources.length:0;if(0<id){ad.push(Xc.length);for(var _c=0;_c<id;_c++){for(var jd=0;jd<Yc.length;jd++){if(cd.resources[_c]===Yc[jd].id){Xc.push(jd);break}}}ad.push(Xc.length)}else{ad.push(-1);ad.push(-1)}}var kd=4+9*bd.length+6*Xc.length;var ld=4*kd;var md=ld+Rc;var nd=Kc["_CreateBuffer"](md);if(nd){var od=o["WASM"]["HEAP32"](nd,ld);od[0]=ld;od[1]=bd.length;od[2]=Xc.length;od[3]=Kc.m_pFileLut.length;od.set(ad,4);var pd=4+ad.length;for(var $c=0;$c<Xc.length;$c++){var qd=6*Xc[$c];for(var _c=0;_c<6;_c++){od[pd++]=Wc[qd++]}}var rd=o["WASM"]["HEAPU8"](nd+ld,Rc);rd.set(new Uint8Array(Nc,Qc,Rc));Kc["_Dispose"](Jc)}Kc.m_pFileLut.push(Vc)}})};Gc["Update"]=function(){return this["_Update"]()};Object.defineProperty(Gc,"object3D",{get:function(){return p(this["_GetObject"]())}});o["Dioramas3MX"]=function(sd,td){var ud=p(Gc._Dioramas3MX());ud.m_pFileLut=[];ud.m_pTextDecoder=new TextDecoder("utf-8");if(td){if(td.m_pGis){td.m_pGis.AddGameObject(ud.object3D,td.m_mLngLat.x,td.m_mLngLat.y);ud.object3D.transform.Translate(td.m_mOffset,1);ud.object3D.transform.Rotate({x:0,y:0,z:0},1)}}o["Request"]("GET","json",sd,null,null,function(vd){ud["m_pMeta"]=vd;var wd={m_pPath:sd.substring(0,sd.lastIndexOf("/")+1),m_aFile:[]};var xd=[0];for(var yd=0;yd<vd.layers.length;yd++){if("meshPyramid"===vd.layers[yd].type){xd.push(yd);xd.push(wd.m_aFile.length);wd.m_aFile.push(vd.layers[yd].root)}}xd[0]=wd.m_aFile.length;var zd=ud["_CreateBuffer"](4*xd.length);var Ad=o["WASM"]["HEAP32"](zd,4*xd.length);Ad.set(xd);ud["_Initialize"](zd);ud.m_pFileLut.push(wd)});return ud}};function t(Bd,Cd,Dd){p=Cd;q=Dd;for(var Ed=0,Fd=Bd;Ed<Fd.length;Ed++){var Gd=Fd[Ed];if(Gd){var Hd=Gd.prototype;if(r[Hd._type_name]){r[Hd._type_name](Hd)}if("Miaokit"===Hd._type_name){o["Miaokit"]=new Gd(0,0)}else if("Gis"===Hd._type_name){r["Gis"]["g_pIns"]=new Gd(0,0)}}}}o["WASM"]=o["WASM"]||{};o["WASM"]["LoadClass"]=t;return[]});MiaokitMerge(function(Id){Id["m_pLogo"]=null;Id["m_pEngine"]=Id["m_pEngine"]||"Unity";Id["m_pEnginePath"]=Id["m_pEnginePath"]||"js/Miaokit/MiaokitU3D/Build/MiaokitU3D.json";Id["m_pModulePath"]=Id["m_pModulePath"]||"./js/Miaokit/Miaokit.wasm";Id["m_pServer"]=Id["m_pServer"]||"http://sve.yongtoc.com/";Id["m_aTiles"]=[];var Jd=Id["m_pEngine"];var Kd=Id["m_pEnginePath"];var Ld=Id["m_pModulePath"];var Md=Id["m_pServer"];var Nd=Id["m_aTiles"];var Od=undefined;var Pd=false;function Qd(){Id["Track"]("Preload");Id["Fetch"](Ld,function(Vd){if(Od){Od(Vd)}else{Od=Vd}});var Td=function(Wd){var Xd=Nd[Wd];Id["Fetch"](Xd.m_pPath,function(Yd){Xd["m_pData"]=Yd;Xd["m_pTile"]=null;if(Nd["m_pLoader"]){Nd["m_pLoader"](Xd)}})};for(var Ud=0;Ud<Nd.length;Ud++){Td(Ud)}}function Rd(Zd,$d){Id["Track"]("LoadEngine");Id["WASM"]["LoadEngine"]({OnEngineLoad:function(_d){Id["Track"]("LoadEngine End");if(Od){Id["Track"]("LoadMiaokit");Id["WASM"]["LoadMiaokit"](Od,_d,function(){Sd(function(){Zd();Pd=true})})}else{Id["Track"]("LoadMiaokit Delay");Od=function(ae){Id["Track"]("LoadMiaokit");Id["WASM"]["LoadMiaokit"](ae,_d,function(){Sd(function(){Zd();Pd=true})})}}},OnRenderingEvent:function(be){if(Pd){$d(be)}}})}function Sd(ce){Id["Track"]("LoadMiaokit End");var de=Nd.length;if(0==de){ce()}Nd["m_pLoader"]=function(ge){ge["m_pTile"]=Id["Miaokit"]["LoadTile"](ge["m_pData"]);ge["m_pData"]=null;if(ge["Active"]){ge["Active"]()}if(0===--de){ce()}};for(var ee=0;ee<Nd.length;ee++){var fe=Nd[ee];if(fe["m_pData"]){Nd["m_pLoader"](fe)}}}Qd["_name"]="Preload";Rd["_name"]="Load";return[Qd,Rd]});MiaokitMerge(function(he){var ie=function(){function ke(){}ke.Clamp=function(le,me,ne){if(le>ne){return ne}if(le<me){return me}return le};return ke}();var je=function(){function oe(pe,qe,re){this.x=0;this.y=0;this.z=0;this.x=pe;this.y=qe;this.z=re}oe.Scale=function(se,te){return{x:te.x*se,y:te.y*se,z:te.z*se}};return oe}();ie["_name"]="Mathf";je["_name"]="Vector3";return[ie,je]});MiaokitMerge(function(ue){var ve=null;var we=null;var xe=null;var ye=[null];var ze=[null];var Ae=[null];var Be=1;var Ce=0;var De=[undefined];var Ee=null;function Fe(Qe){Qe["isnanf"]=isNaN;Qe["isinff"]=isFinite;Qe["powf"]=Math.pow;Qe["sqrtf"]=Math.sqrt;Qe["expf"]=Math.exp;Qe["logf"]=Math.log;Qe["floorf"]=Math.floor;Qe["ceilf"]=Math.ceil;Qe["sinf"]=Math.sin;Qe["cosf"]=Math.cos;Qe["tanf"]=Math.tan;Qe["asinf"]=Math.asin;Qe["acosf"]=Math.acos;Qe["atanf"]=Math.atan;Qe["atan2f"]=Math.atan2;Qe["ldexpf"]=function(Re,Se){return Re*Math.pow(2,Se)}}function Ge(Te){var Ue=ue["GL"];var Ve=Ue.Ctx.getParameter(34047);Te["glTexImage2DExt"]=function(We,Xe){var Ye=ze[Xe];if(Ye){Ue.Ctx.texParameterf(We,34046,Ve);Ue.Ctx.texImage2D(We,0,Ue.Ctx.RGB,Ue.Ctx.RGB,Ue.Ctx.UNSIGNED_BYTE,Ye);ze[Xe]=null}};Te["glCreateShader"]=Ue._glCreateShader;Te["glDeleteShader"]=Ue._glDeleteShader;Te["glShaderSource"]=Ue._glShaderSource;Te["glCompileShader"]=Ue._glCompileShader;Te["glGetShaderiv"]=Ue._glGetShaderiv;Te["glGetShaderInfoLog"]=Ue._glGetShaderInfoLog;Te["glCreateProgram"]=Ue._glCreateProgram;Te["glDeleteProgram"]=Ue._glDeleteProgram;Te["glAttachShader"]=Ue._glAttachShader;Te["glLinkProgram"]=Ue._glLinkProgram;Te["glUseProgram"]=Ue._glUseProgram;Te["glGetProgramiv"]=Ue._glGetProgramiv;Te["glGetProgramInfoLog"]=Ue._glGetProgramInfoLog;Te["glBindAttribLocation"]=Ue._glBindAttribLocation;Te["glGenVertexArrays"]=Ue._glGenVertexArrays;Te["glDeleteVertexArrays"]=Ue._glDeleteVertexArrays;Te["glBindVertexArray"]=Ue._glBindVertexArray;Te["glVertexAttribPointer"]=Ue._glVertexAttribPointer;Te["glEnableVertexAttribArray"]=Ue._glEnableVertexAttribArray;Te["glGetActiveUniform"]=Ue._glGetActiveUniform;Te["glGetUniformLocation"]=Ue._glGetUniformLocation;Te["glUniform1i"]=Ue._glUniform1i;Te["glUniform1fv"]=Ue._glUniform1fv;Te["glUniform2fv"]=Ue._glUniform2fv;Te["glUniform3fv"]=Ue._glUniform3fv;Te["glUniform4fv"]=Ue._glUniform4fv;Te["glUniform1iv"]=Ue._glUniform1iv;Te["glUniform2iv"]=Ue._glUniform2iv;Te["glUniform3iv"]=Ue._glUniform3iv;Te["glUniform4iv"]=Ue._glUniform4iv;Te["glUniformMatrix3fv"]=Ue._glUniformMatrix3fv;Te["glUniformMatrix4fv"]=Ue._glUniformMatrix4fv;Te["glGenTextures"]=Ue._glGenTextures;Te["glDeleteTextures"]=Ue._glDeleteTextures;Te["glActiveTexture"]=Ue._glActiveTexture;Te["glBindTexture"]=Ue._glBindTexture;Te["glTexStorage2D"]=Ue._glTexStorage2D;Te["glTexParameteri"]=Ue._glTexParameteri;Te["glTexImage2D"]=Ue._glTexImage2D;Te["glGenerateMipmap"]=Ue._glGenerateMipmap;Te["glGenBuffers"]=Ue._glGenBuffers;Te["glDeleteBuffers"]=Ue._glDeleteBuffers;Te["glBindBuffer"]=Ue._glBindBuffer;Te["glBufferData"]=Ue._glBufferData;Te["glMapBufferRange"]=Ue._glMapBufferRange;Te["glUnmapBuffer"]=Ue._glUnmapBuffer;Te["glGenFramebuffers"]=Ue._glGenFramebuffers;Te["glDeleteFramebuffers"]=Ue._glDeleteFramebuffers;Te["glBindFramebuffer"]=Ue._glBindFramebuffer;Te["glFramebufferTexture2D"]=Ue._glFramebufferTexture2D;Te["glCheckFramebufferStatus"]=Ue._glCheckFramebufferStatus;Te["glClearColor"]=Ue._glClearColor;Te["glClear"]=Ue._glClear;Te["glBlendFuncSeparate"]=Ue._glBlendFuncSeparate;Te["glBlendEquationSeparate"]=Ue._glBlendEquationSeparate;Te["glEnable"]=Ue._glEnable;Te["glDisable"]=Ue._glDisable;Te["glDepthFunc"]=Ue._glDepthFunc;Te["glDepthMask"]=Ue._glDepthMask;Te["glClearDepthf"]=Ue._glClearDepthf;Te["glClearStencil"]=Ue._glClearStencil;Te["glCullFace"]=Ue._glCullFace;Te["glPolygonOffset"]=Ue._glPolygonOffset;Te["glViewport"]=Ue._glViewport;Te["glDrawArrays"]=Ue._glDrawArrays;Te["glDrawArraysInstanced"]=Ue._glDrawArraysInstanced;Te["glDrawElements"]=Ue._glDrawElements;Te["glDrawElementsInstanced"]=Ue._glDrawElementsInstanced;Te["glFlush"]=Ue._glFlush;Te["glFinish"]=Ue._glFinish}function He(Ze){function $e(hf){var jf=ue["WASM"].GetString(hf);if(!jf.startsWith("http")){jf=ue["m_pServer"]+jf}if(jf.endsWith("assetbundle")){jf+=".bin"}return jf}function _e(kf,lf,mf,nf){var of=$e(kf);var pf=ve.get(mf);var qf=ve.get(nf);ue["Fetch"](of,function(rf){if(rf){var sf=pf(lf,rf.byteLength);if(sf){ue["WASM"]["HEAPU8"](sf,rf.byteLength).set(new Uint8Array(rf))}}else{console.error("资源丢失:",of)}qf(lf)})}function af(tf,uf,vf){var wf=$e(tf);var xf=ve.get(vf);var yf=new Image;yf.crossOrigin="anonymous";yf.src=wf;yf.onload=function(zf){xf(uf,ze.push(yf)-1)}}function bf(Af,Bf,Cf,Df){_e(Af,Bf,Cf,Df)}function cf(Ef,Ff,Gf,Hf){Ee["LoadTerrain"](Ef,Ff,Gf,Hf)}function df(If,Jf,Kf,Lf){var Mf=ue["WASM"]["HEAP32"](If,16);Ee["LoadBlockbox"](Jf,Mf[0],Mf[1],Mf[2],Mf[3],Kf,Lf)}function ef(Nf,Of){var Pf=ue["WASM"]["HEAP32"](Nf,12);var Qf=Ke(Pf[0]);if(Qf){Qf["_Load3MX"](Pf[1],Pf[2],Of)}}function ff(Rf,Sf,Tf,Uf){_e(Rf,Sf,Tf,Uf)}var gf=[undefined,_e,af,bf,cf,df,ef,ff];Ze["APP_LOAD"]=function(Vf,Wf,Xf,Yf,Zf){gf[Vf](Wf,Xf,Yf,Zf)}}function Ie($f){var _f={NaN:NaN,Infinity:Infinity};Fe($f);Ge($f);He($f);$f["APP_DYNAMIC_LINK"]=function(ag,bg){var cg=ue["WASM"]["HEAPU32"](ag,bg);var dg=cg[0];var eg=cg[1];for(var fg=0;fg<dg;fg++){var gg=cg[2+fg]-1;var hg=cg[eg++];var ig=cg[eg++];var jg=ue["WASM"].GetString(hg,ig);var kg=JSON.parse(jg);var lg=function(pg,qg){this["m_nID"]=pg;this["m_nObject"]=qg};var mg=lg.prototype;mg["_type_name"]=kg[0];mg["_type_id"]=fg+1;mg["_ins_count"]=0;De[fg+1]=lg;var ng=function(rg){var sg=ve.get(cg[eg++]);eg++;var tg=function(){var ug=Array.prototype.slice.call(arguments);ug.unshift(this.m_nObject);return sg.apply(this,ug)};if(0===rg){mg["_"+kg[rg]]=tg}else{mg[kg[rg]]=tg}};for(var og=0;og<gg;og++){ng(og)}}ue["WASM"]["LoadClass"](De,Ke,Ne);ue["Miaokit"]["ResizeCavans"]=function(vg,wg){if(xe.SE_RESIZE){xe.SE_RESIZE(vg,wg)}}};$f["APP_PRINT"]=function(xg,yg,zg){var Ag=ue["WASM"].GetString(xg,yg);ue["Track"](Ag,zg)};$f["APP_DO_ACTION"]=function(Bg,Cg,Dg,Eg){ye[Bg](Cg,Dg,Eg)};$f["APP_CREATE_OBJ"]=function(Fg,Gg){if(0<Fg){var Hg=Le();var Ig=new De[Fg](Hg,Gg);Ae[Hg]=Ig;De[Fg].prototype._ins_count++;return Hg}else{if(-21==Fg){var Jg=ue["WASM"]["HEAP32"](Gg,16);var Kg=Jg[0];var Lg=Jg[1];var Mg=Jg[2];var Ng=Jg[3];var Og=ue["WASM"]["HEAP8"](Mg,Lg);var Pg=new Blob([Og]);var Qg=window.URL.createObjectURL(Pg);var Rg=ve.get(Ng);var Sg=new Image;Sg.src=Qg;Sg.onload=function(Tg){Rg(Kg,ze.push(Sg)-1);window.URL.revokeObjectURL(Qg)}}}return 0};$f["APP_FREE_OBJ"]=function(Ug){var Vg=Ae[Ug];De[Vg._type_id].prototype._ins_count--;Me(Ug)};$f["APP_DO"]=ue["ShaderLab"].OperateMaterial;we=$f["memory"];ue["WASM"]["m_pMemory"]=ue["WASM"]["m_pMemory"]||we;return{env:$f,global:_f}}function Je(Wg,Xg,Yg){Xg=Ie(Xg);WebAssembly.instantiate(Wg,Xg).then(function(Zg){return Zg.instance}).then(function($g){xe=$g.exports;ve=xe.__indirect_function_table;ue["WASM"]["Update"]=$g.exports.SE_UPDATE;ue["WASM"]["Malloc"]=$g.exports.Malloc;ue["WASM"]["Free"]=$g.exports.Free;ue["ShaderLab"]["DrawPass_"]=$g.exports.SE_DRAW_PASS;ue["ShaderLab"]["SetSunlight"]=$g.exports.SE_SUNLIGHT;ue["ShaderLab"]["CreateUniformsDesc"]=$g.exports.SE_CREATE_UNIFORMS_DESC;ue["ShaderLab"]["GetTexture"]=function(_g){return xe.SE_GL_RESOURCE(9,_g)};ue["Track"]("Start thread");ue["WASM"]["Worker"]=Pe(function(){ue["Track"]("Start thread succeed")});xe.Start();Yg()})}function Ke(ah){return Ae[ah]}function Le(){var bh=Be;if(Ae.length>Be){Be=Ae[Be]}else{Be++}Ce++;return bh}function Me(ch){Ae[ch]=Be;Be=ch;Ce--}function Ne(dh){var eh="'系统运行':{";eh+="'时间':"+(ue.Time()/1e3).toFixed(0);eh+=", '帧率':"+dh;eh+=", 'WASM内存':"+ue.WASM.m_pMemory.buffer.byteLength/1024/1024;eh+="}";var fh="'JS对象':{";fh+="'工厂':["+Ae.length+", "+Ce+", "+(Ae.length-Ce)+"]";for(var gh=1;gh<De.length;gh++){fh+=", '"+De[gh].prototype._type_name+"':"+De[gh].prototype._ins_count}fh+="}";return[eh,fh]}function Oe(hh){var ih=ye.length;ye.push(hh);return ih}function Pe(jh){var kh=xe.UTIL_WORKER_CODE();var lh=ue["WASM"]["HEAPU32"](kh,16);if(false){Ee=new Worker(window.URL.createObjectURL(new Blob([ue["WASM"]["HEAPU8"](lh[2],lh[3])])));var mh=ue["WASM"]["HEAPU8"]().slice(lh[0],lh[0]+lh[1]);var nh=mh.buffer;Ee.postMessage({m_nID:1,m_aCode:nh},[nh])}else{var oh=ue["m_pModulePath"].replace(".wasm","");Ee=new Worker(oh+"Worker.min.js");fetch(oh+"Worker.wasm").then(function(ph){return ph.arrayBuffer()}).then(function(qh){if(qh){Ee.postMessage({m_nID:1,m_aCode:qh},[qh])}else{console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",qh)}}).catch(function(rh){console.error("fetch error: ./js/Miaokit/MiaokitWorker.wasm",rh)})}Ee.onmessage=function(sh){var th=sh.data;switch(th.m_nID){case 1:jh();jh=null;break;case 2:Ee["OnLoadTerrain"](th);break;case 3:Ee["OnLoadBlockbox"](th);break;default:console.error("子线程消息异常:",th);break}};Ee["LoadTerrain"]=function(uh,vh,wh,xh){Ee.postMessage({m_nID:2,m_pPath:ue["WASM"].GetString(uh),m_nRequest:vh,m_nAlloc:wh,m_nCallback:xh})};Ee["OnLoadTerrain"]=function(yh){var zh=ve.get(yh.m_nAlloc);var Ah=ve.get(yh.m_nCallback);var Bh=yh.m_pData;if(Bh){var Ch=zh(yh.m_nRequest,Bh.byteLength);if(Ch){ue["WASM"]["HEAPU8"](Ch,Bh.byteLength).set(new Uint8Array(Bh))}}else{console.warn("Terrain miss:",yh.m_pPath)}Ah(yh.m_nRequest)};Ee["LoadBlockbox"]=function Dh(Eh,Fh,Gh,Hh,Ih,Jh,Kh){Ee.postMessage({m_nID:3,m_nRequest:Eh,m_nCol:Fh,m_nRow:Gh,m_nColOffset:Hh,m_nRowOffset:Ih,m_nAlloc:Jh,m_nCallback:Kh})};Ee["OnLoadBlockbox"]=function(Lh){var Mh=ve.get(Lh.m_nAlloc);var Nh=ve.get(Lh.m_nCallback);var Oh=Lh.m_pData;var Ph=[0,0,0,0];for(var Qh=0;Qh<4;Qh++){var Rh=Oh[Qh];if(0<Rh.m_nVertexCount&&0<Rh.m_nSubmeshCount){var Sh=new ue.Mesh;var Th=new Int32Array(Rh.m_aIndex);Sh.position=new Float32Array(Rh.m_aPosition);Sh.normal=new Float32Array(Rh.m_aNormal);Sh.uv=new Float32Array(Rh.m_aUV);for(var Uh=0;Uh<Rh.m_nSubmeshCount;Uh++){var Vh=Th[2*Uh];var Wh=Th[2*Uh+1];var Xh=[];for(var Yh=Vh;Yh<Wh;Yh++){Xh.push(Yh)}Sh.SetIndices(Uh,new Int32Array(Xh),4)}Sh.Apply();Ph[Qh]=Sh.m_nObject}else{Ph[Qh]=0}}var Zh=Mh(Lh.m_nRequest,16);if(Zh){ue["WASM"]["HEAPU32"](Zh,16).set(new Uint32Array(Ph));Nh(Lh.m_nRequest)}};return Ee}ue["WASM"]=ue["WASM"]||{};ue["WASM"]["LoadMiaokit"]=Je;ue["WASM"]["GetObject"]=Ke;ue["WASM"]["RegisterDelegate"]=Oe;return[]});MiaokitMerge(function($h){var _h=undefined;var ai={};var bi=[];var ci={RGBA32_FLOAT:function(){return[_h.RGBA,_h.RGBA,_h.FLOAT]},RGBA16_FLOAT:function(){return[_h.RGBA,_h.RGBA,36193]},RGBA8:function(){return[_h.RGBA,_h.RGBA,_h.UNSIGNED_BYTE]},D16_UNORM:function(){return[_h.DEPTH_COMPONENT,_h.DEPTH_COMPONENT,_h.UNSIGNED_SHORT]},D24_UNORM:function(){return[_h.DEPTH_COMPONENT,_h.DEPTH_COMPONENT,_h.UNSIGNED_INT]},D24S8_UNORM:function(){return[_h.DEPTH_STENCIL,_h.DEPTH_STENCIL,34042]}};var di={Opaque:1,Transparent:2,Outline:4,CastShadow:8,ReceiveShadow:16};var ei=null;var fi=["u_Object","u_Color","u_EyePos","u_MatW","u_MatVP","u_MatWVP","u_MainTex","u_Sunlight"];var gi=[null];var hi=[null];var ii=[null];var ji=[null];var ki=[new Int32Array([0,0,0,0]),new Float32Array([0,0,0,0]),new Float32Array([1,0,0,0,1,0,0,0,1]),new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),new Int32Array([0,0,0,0]),new Int32Array([0,0,0,0])];var li=[function(Fi,Gi,Hi){_h.uniform4iv(gi[Fi],ji[Gi])},function(Ii,Ji,Ki){_h.uniform4fv(gi[Ii],ji[Ji])},function(Li,Mi,Ni){_h.uniformMatrix3fv(gi[Li],false,ji[Mi])},function(Oi,Pi,Qi){_h.uniformMatrix4fv(gi[Oi],false,ji[Pi])},function(Ri,Si,Ti){var Ui=ji[Si];var Vi=Ui[1];if(Ui[0]){Vi=Di.GetTexture(Vi);if(Vi){Ui[0]=0;Ui[1]=Vi}}_h.uniform1i(gi[Ri],Ti);_h.activeTexture(33984+Ti);_h.bindTexture(3553,bi[Vi])},function(Wi,Xi){console.error("Unsupported UniformCubemap!")}];var mi=[null];var ni=[null];var oi=[function(Yi){var Zi=$h["ShaderLab"]["Pipeline"]["InternalShader"][Yi];var $i=wi(Zi);return $i.id},ti,function(_i,aj,bj,cj){li[_i](aj,bj,cj);return 0},function(dj,ej,fj,gj){var hj=$h["WASM"].GetString(gj);var ij=ji[dj];var jj=ii[ij[19]];var kj=jj[hj];return undefined===kj?0:kj},function(lj,mj){ni[mj][1]();return 0},function(){Di.Draw()},xi];var pi=1280;var qi=720;var ri=0;var si=null;function ti(nj,oj,pj,qj){var rj=null;switch(oj){case 0:rj=new Int32Array(ei,qj,4);rj.set(ki[0]);break;case 1:rj=new Float32Array(ei,qj,4);rj.set(ki[1]);break;case 2:rj=new Float32Array(ei,qj,9);rj.set(ki[2]);break;case 3:rj=new Float32Array(ei,qj,16);rj.set(ki[3]);break;case 4:rj=new Int32Array(ei,qj,4);rj.set(ki[4]);break;case 5:rj=new Int32Array(ei,qj,4);rj.set(ki[5]);break;case 6:rj=new Int32Array(ei,qj,pj);break;default:console.error("Unsupported uniform type:",oj);break}ji[nj]=rj;return nj}function ui(sj,tj){var uj=_h.createShader(sj);if(!uj){console.error("Could not create shader object!");return null}_h.shaderSource(uj,tj);_h.compileShader(uj);if(!_h.getShaderParameter(uj,_h.COMPILE_STATUS)){var vj=_h.getShaderInfoLog(uj);_h.deleteShader(uj);console.error("Could not compile shader! \n\n"+vj);return null}return uj}function vi(wj){var xj=wj.program;var yj=0;{_h.bindAttribLocation(xj,0,"a_Position");_h.bindAttribLocation(xj,1,"a_Normal");_h.bindAttribLocation(xj,2,"a_UV");_h.bindAttribLocation(xj,3,"a_Color");_h.bindAttribLocation(xj,4,"a_Tangent");_h.bindAttribLocation(xj,5,"a_Binormal");_h.bindAttribLocation(xj,9,"a_UV2");if(7<_h.getProgramParameter(xj,_h.ACTIVE_ATTRIBUTES)){_h.bindAttribLocation(xj,10,"a_UV3");_h.bindAttribLocation(xj,11,"a_UV4");_h.bindAttribLocation(xj,12,"a_UV5");_h.bindAttribLocation(xj,13,"a_UV6");_h.bindAttribLocation(xj,14,"a_UV7");_h.bindAttribLocation(xj,15,"a_UV8")}}{_h.linkProgram(xj);if(!_h.getProgramParameter(xj,_h.LINK_STATUS)){var zj=_h.getProgramInfoLog(xj);console.error("Could not compile program! \n\n"+zj);return 0}}{var Aj=_h.getProgramParameter(xj,35718);var Bj=Di.CreateUniformsDesc(Aj);var Cj=ji[Bj];var Dj={};var Ej=0;Cj[19]=ii.push(Dj)-1;mi[Cj[19]]=wj;for(var Fj=0;Fj<2;Fj++){for(var Gj=0;Gj<Aj;Gj++){var zj=_h.getActiveUniform(xj,Gj);var Hj=zj.type;if(35678===Hj||35680===Hj){if(0!==Fj){continue}}else{if(1!==Fj){continue}}var Ij=zj.name;var Jj=_h.getUniformLocation(xj,Ij);var Kj=gi.push(Jj)-1;for(var Lj=0;Lj<fi.length;Lj++){if(Ij===fi[Lj]){Cj[Lj]=Ej;break}}switch(Hj){case 35669:Hj=0;break;case 35666:Hj=1;break;case 35675:Hj=2;break;case 35676:Hj=3;break;case 35678:Hj=4;break;case 35680:Hj=5;break;default:console.error("Unsupported uniform type:",zj);break}Cj[20+Ej]=Kj;Cj[20+Aj+Ej]=Hj;Dj[Ij]=Ej;hi[Kj]=Ij;Ej++}}yj=Cj[16]}{var Mj=0;if(wj.mark){for(var Nj=0,Oj=wj.mark;Nj<Oj.length;Nj++){var Pj=Oj[Nj];Mj|=di[Pj]}}wj.mode=Mj}return yj}function wi(Qj){if(!Qj){return null}var Rj=ai[Qj];if(!Rj){console.error("Could not find shader:",Qj);return null}if(Rj.program){return Rj}Rj.vs=ui(_h.VERTEX_SHADER,ai["Common"]["DeclareVS"]+Rj.vs_src+ai["Common"][Rj.type+"VS"]);if(!Rj.vs){console.error("Could not create vertex shader:",Qj);return null}Rj.fs=ui(_h.FRAGMENT_SHADER,ai["Common"]["DeclareFS"]+Rj.fs_src+ai["Common"][Rj.type+"FS"]);if(!Rj.fs){_h.deleteShader(Rj.vs);Rj.vs=null;console.error("Could not create fragment shader:",Qj);return null}Rj.program=_h.createProgram();if(!Rj.program){_h.deleteShader(Rj.vs);_h.deleteShader(Rj.fs);Rj.vs=null;Rj.fs=null;console.error("Could not create program object!");return null}_h.attachShader(Rj.program,Rj.vs);_h.attachShader(Rj.program,Rj.fs);Rj.id=vi(Rj);if(!Rj.id){_h.deleteProgram(Rj.program);_h.deleteShader(Rj.vs);_h.deleteShader(Rj.fs);Rj.program=null;Rj.vs=null;Rj.fs=null}return Rj}function xi(Sj,Tj){var Uj=undefined;var Vj=undefined;var Wj=undefined;var Xj=undefined;var Yj=0;function Zj(){var hk=ji[Sj];var ik=ji[Tj];var jk=mi[hk[19]];var kk=hk[20];var lk=20+hk[17];Uj=jk.program;Vj=ii[hk[19]];Wj=hk;Xj=[];Yj=hk[17];var mk=function(vk){var wk=vk;var xk=ji[ik[wk]];var yk=gi[kk+wk];var zk=hk[lk+wk];var Ak=[function(){return xk},function(Bk){xk.set(Bk)},undefined];switch(zk){case 0:Ak[2]=function(){_h.uniform4iv(yk,xk)};break;case 1:Ak[2]=function(){_h.uniform4fv(yk,xk)};break;case 2:Ak[2]=function(){_h.uniformMatrix3fv(yk,false,xk)};break;case 3:Ak[2]=function(){_h.uniformMatrix4fv(yk,false,xk)};break;case 4:Ak[2]=function(){var Ck=xk[1];if(xk[0]){Ck=Di.GetTexture(Ck);if(Ck){xk[0]=0;xk[1]=Ck}}_h.uniform1i(yk,wk);_h.activeTexture(33984+wk);_h.bindTexture(3553,bi[Ck])};break;default:console.error("Unsupported uniform type!",zk);break}Xj[wk]=Ak};for(var nk=0;nk<Yj;nk++){mk(nk)}if(jk.uniform_values){for(var ok=0,pk=jk.uniform_values;ok<pk.length;ok++){var qk=pk[ok];var rk=Vj[qk[0]];if(undefined!==rk){var sk=hk[lk+rk];if(4===sk||5===sk){var tk=Di.Pipeline["Resource"][qk[1]];var uk=[0,tk.Handle,0,0];Xj[rk][1](uk)}}}}return jk.mode}function $j(){if(si){si(ni[Tj],_h)}_h.useProgram(Uj);ri=Sj;for(var Dk=0,Ek=Xj;Dk<Ek.length;Dk++){var Fk=Ek[Dk];Fk[2]()}}function _j(Gk){return Vj[Gk]}function ak(Hk){return Xj[Hk][0]()}function bk(Ik){Ik=Wj[Ik];if(-1<Ik){return Xj[Ik][0]()}return null}function ck(Jk){var Kk=Vj[Jk];if(undefined!==Kk){return Xj[Kk][0]()}return null}function dk(Lk,Mk){Xj[Lk][1](Mk);if(ri===Sj){Xj[Lk][2]()}}function ek(Nk,Ok){Nk=Wj[Nk];if(-1<Nk){Xj[Nk][1](Ok);if(ri===Sj){Xj[Nk][2]()}}}function fk(Pk,Qk){var Rk=Vj[Pk];if(undefined!==Rk){Xj[Rk][1](Qk);if(ri===Sj){Xj[Rk][2]()}}}function gk(Sk){Xj[Sk][2]()}ni[Tj]=[Zj,$j,_j,ak,bk,ck,dk,ek,fk,gk];return Zj()}function yi(Tk){{Object.defineProperty(Tk,"Attr",{get:function(){if(!this.Attr_){this.Attr_=ni[this._VarList()]}return this.Attr_}})}{var Uk=function(Wk){var Xk=Wk;Object.defineProperty(Tk,fi[Wk],{get:function(){return this.Attr[4](Xk)},set:function(Yk){if(Yk){this.Attr[7](Xk,Yk)}}})};for(var Vk=0;Vk<fi.length;Vk++){Uk(Vk)}}{}}function zi(Zk,$k,_k,al,bl){return oi[Zk]($k,_k,al,bl)}function Ai(cl){var dl=_h.createTexture();if(!dl){console.error("Could not create texture object!");return null}_h.bindTexture(_h.TEXTURE_2D,dl);_h.texParameteri(_h.TEXTURE_2D,_h.TEXTURE_MIN_FILTER,_h.LINEAR);_h.texParameteri(_h.TEXTURE_2D,_h.TEXTURE_MAG_FILTER,_h.LINEAR);_h.texParameteri(_h.TEXTURE_2D,_h.TEXTURE_WRAP_S,_h.CLAMP_TO_EDGE);_h.texParameteri(_h.TEXTURE_2D,_h.TEXTURE_WRAP_T,_h.CLAMP_TO_EDGE);var el=new Image;el.crossOrigin="anonymous";el.src=cl.URL;el.onload=function(fl){_h.bindTexture(_h.TEXTURE_2D,dl);_h.texImage2D(_h.TEXTURE_2D,0,_h.RGB,_h.RGB,_h.UNSIGNED_BYTE,el);_h.bindTexture(_h.TEXTURE_2D,null)};_h.bindTexture(_h.TEXTURE_2D,null);return dl}function Bi(gl,hl,il,jl){if(jl===void 0){jl=null}var kl=_h.createTexture();if(!kl){console.error("Could not create texture object!");return null}_h.bindTexture(_h.TEXTURE_2D,kl);_h.texParameteri(_h.TEXTURE_2D,_h.TEXTURE_MIN_FILTER,_h.NEAREST);_h.texParameteri(_h.TEXTURE_2D,_h.TEXTURE_MAG_FILTER,_h.NEAREST);_h.texParameteri(_h.TEXTURE_2D,_h.TEXTURE_WRAP_S,_h.CLAMP_TO_EDGE);_h.texParameteri(_h.TEXTURE_2D,_h.TEXTURE_WRAP_T,_h.CLAMP_TO_EDGE);var ll=ci[gl]();_h.texImage2D(_h.TEXTURE_2D,0,ll[0],hl,il,0,ll[1],ll[2],jl);_h.bindTexture(_h.TEXTURE_2D,null);kl["_Format"]=ll;return kl}function Ci(ml,nl){var ol=_h.createFramebuffer();if(!ol){console.error("Could not create framebuffer object!");return null}_h.bindFramebuffer(_h.FRAMEBUFFER,ol);_h.framebufferTexture2D(_h.FRAMEBUFFER,_h.COLOR_ATTACHMENT0,_h.TEXTURE_2D,ml,0);if(nl&&nl["_Format"][0]===_h.DEPTH_STENCIL){_h.framebufferTexture2D(_h.FRAMEBUFFER,_h.DEPTH_STENCIL_ATTACHMENT,_h.TEXTURE_2D,nl,0)}else{_h.framebufferTexture2D(_h.FRAMEBUFFER,_h.DEPTH_ATTACHMENT,_h.TEXTURE_2D,nl,0)}if(_h.FRAMEBUFFER_COMPLETE!=_h.checkFramebufferStatus(_h.FRAMEBUFFER)){_h.deleteFramebuffer(ol);console.error("Framebuffer check failed!");return null}return ol}var Di={_name:"ShaderLab",Shader:ai,Pipeline:{},Init:function(pl){_h=$h["GL"]["Ctx"];bi=$h["GL"]["_textures"];pi=_h.canvas.width;qi=_h.canvas.height;for(var ql=0,rl=this.Pipeline.RenderTarget;ql<rl.length;ql++){var sl=rl[ql];if(sl){var tl=sl.Width||pi;var ul=sl.Height||qi;sl.Texture=Bi(sl.Format,tl,ul);sl.Handle=$h["GL"]["RegisterTexture"](sl.Texture);sl.Size=[1/tl,1/ul,tl,ul]}}for(var vl=0,wl=this.Pipeline.Resource;vl<wl.length;vl++){var xl=wl[vl];if(xl){if("2D"===xl.TYPE){xl.Texture=Ai(xl);xl.Handle=$h["GL"]["RegisterTexture"](xl.Texture)}}}function yl(Il){var Jl=Il.RenderTarget;if(Jl){var Kl=Di.Pipeline["RenderTarget"][Jl[0]];var Ll=Di.Pipeline["RenderTarget"][Jl[1]];Il.Framebuffer=Ci(Kl.Texture,Ll?Ll.Texture:null);Il.Framebuffer.width=Kl.Size[2];Il.Framebuffer.height=Kl.Size[3]}else{Il.Framebuffer=null}}for(var zl=0,Al=this.Pipeline.Pass;zl<Al.length;zl++){var Bl=Al[zl];if(Bl){if("Clear"===Bl.Type){Bl._Type=2}else{Bl._Type="Render"===Bl.Type?0:1}Bl._Mask=0;for(var Cl=0,Dl=Bl.Mask;Cl<Dl.length;Cl++){var El=Dl[Cl];Bl._Mask+=di[El]}yl(Bl);if(Bl.Pingpong){for(var Fl=0,Gl=Bl.Pingpong;Fl<Gl.length;Fl++){var Hl=Gl[Fl];yl(Hl)}}}}},Draw:function(){var Ml=0;for(var Nl=0,Ol=this.Pipeline.Pass;Nl<Ol.length;Nl++){var Pl=Ol[Nl];Ei.BeginDrawPass();if(Pl.Pingpong){for(var Ql=0;Ql<Pl.PingpongCount;Ql++){for(var Rl=0;Rl<Pl.Pingpong.length;Rl++){Pl.Framebuffer=Pl.Pingpong[Rl].Framebuffer;Pl.SetUniforms=Pl.Pingpong[Rl].SetUniforms;this.DrawPass(Pl,Di.DrawPass_)}}}else{this.DrawPass(Pl,Di.DrawPass_)}Ei.EndDrawPass(Ml++)}},DrawPass:function(Sl,Tl){_h.bindFramebuffer(_h.FRAMEBUFFER,Sl.Framebuffer);if(Sl.Framebuffer){_h.viewport(0,0,Sl.Framebuffer.width,Sl.Framebuffer.height)}else{_h.viewport(0,0,pi,qi)}var Ul=Sl.Depth;if(Ul){_h.enable(_h.DEPTH_TEST);_h.depthMask(Ul.Write);_h.depthFunc(_h[Ul.Func])}else{_h.disable(_h.DEPTH_TEST)}var Vl=Sl.Blend;if(Vl){_h.enable(_h.BLEND);_h.blendEquationSeparate(_h[Vl.ColorFunc],_h[Vl.AlphaFunc]);_h.blendFuncSeparate(_h[Vl.ColorSrc],_h[Vl.ColorDest],_h[Vl.AlphaSrc],_h[Vl.AlphaDest])}else{_h.disable(_h.BLEND)}var Wl=Sl.Stencil;if(Wl){_h.enable(_h.STENCIL_TEST);_h.stencilFunc(_h[Wl.Func],Wl.Value,Wl.Mask);_h.stencilOp(_h[Wl.Faild],_h[Wl.ZFaild],_h[Wl.Pass])}else{_h.disable(_h.STENCIL_TEST)}var Xl=Sl.ClearTarget;if(Xl){var Yl=0;if(Xl.Color){_h.clearColor(Xl.Color.r,Xl.Color.g,Xl.Color.b,Xl.Color.a);Yl+=_h.COLOR_BUFFER_BIT}if(undefined!==Xl.Depth){_h.clearDepth(Xl.Depth);Yl+=_h.DEPTH_BUFFER_BIT}if(undefined!==Xl.Stencil){_h.clearStencil(Xl.Stencil);Yl+=_h.STENCIL_BUFFER_BIT}_h.clear(Yl)}si=Sl.SetUniforms;if(Sl.Shader){if(!Sl._Material){Sl._Material=new $h["Material"](Sl.Shader)}Sl._Material._Bind()}Tl(Sl._Type,Sl._Mask)},PreflushBuffer:function(){var Zl=ji.length;var $l=new Array(Zl);for(var _l=0;_l<Zl;_l++){var am=ji[_l];if(am){if("Float32Array"===am.constructor.name){$l[_l]=am.length}else{$l[_l]=-am.length}ji[_l]=am.byteOffset}}return $l},FlushBuffer:function(bm,cm){ei=bm;var dm=ji.length;for(var em=0;em<dm;em++){var fm=ji[em];if(fm){var gm=cm[em];if(0<gm){ji[em]=new Float32Array(ei,fm,gm)}else{ji[em]=new Int32Array(ei,fm,-gm)}}}for(var em=0;em<dm;em++){var hm=ni[em];if(hm){hm[0]()}}$h["GL"]["FlushHeap"]()},ResizeCanvas:function(im,jm){},ExpandMaterial:yi,OperateMaterial:zi,CreateUniformsDesc:undefined,GetTexture:undefined,DrawPass_:undefined,SetSunlight:undefined};var Ei={_name:"Profiler",m_pMsg:"",m_nCycleStart:0,m_nCycleTick:0,m_nBeginCycle:0,m_nTotalCycle:0,m_nBeginScript:0,m_nTotalScript:0,m_nBeginUpdate:0,m_nTotalUpdate:0,m_nBeginDraw:0,m_nTotalDraw:0,m_nBeginMaterial:0,m_nTotalMaterial:0,m_nBeginDrawPass:0,m_nTotalDrawPass:[],BeginCycle:function(){if(0===Ei.m_nCycleTick){Ei.m_nCycleStart=$h["Time"]();Ei.m_nCycleTick=0;Ei.m_nBeginCycle=0;Ei.m_nTotalCycle=0;Ei.m_nBeginScript=0;Ei.m_nTotalScript=0;Ei.m_nBeginUpdate=0;Ei.m_nTotalUpdate=0;Ei.m_nBeginDraw=0;Ei.m_nTotalDraw=0;Ei.m_nBeginMaterial=0;Ei.m_nTotalMaterial=0;Ei.m_nBeginDrawPass=0;Ei.m_nTotalDrawPass=[]}Ei.m_nBeginCycle=$h["Time"]()},EndCycle:function(){Ei.m_nTotalCycle+=$h["Time"]()-Ei.m_nBeginCycle;if(60===++Ei.m_nCycleTick){var km={"�ܺ�ʱ":$h["Time"]()-Ei.m_nCycleStart,"Ӧ��ѭ��":Ei.m_nTotalCycle,"�ű��߼�":Ei.m_nTotalScript,"��������":Ei.m_nTotalUpdate,"��������":Ei.m_nTotalDraw,"ͨ������":Ei.m_nTotalDrawPass};Ei.m_pMsg="'����ͳ��':"+JSON.stringify(km);Ei.m_nCycleTick=0}},BeginScript:function(){Ei.m_nBeginScript=$h["Time"]()},EndScript:function(){Ei.m_nTotalScript+=$h["Time"]()-Ei.m_nBeginScript},BeginUpdate:function(){Ei.m_nBeginUpdate=$h["Time"]()},EndUpdate:function(){Ei.m_nTotalUpdate+=$h["Time"]()-Ei.m_nBeginUpdate},BeginDraw:function(){Ei.m_nBeginDraw=$h["Time"]()},EndDraw:function(){Ei.m_nTotalDraw+=$h["Time"]()-Ei.m_nBeginDraw},BeginMaterial:function(){Ei.m_nBeginMaterial=$h["Time"]()},EndMaterial:function(){Ei.m_nTotalMaterial+=$h["Time"]()-Ei.m_nBeginMaterial},BeginDrawPass:function(){Ei.m_nBeginDrawPass=$h["Time"]()},EndDrawPass:function(lm){Ei.m_nTotalDrawPass[lm]=(Ei.m_nTotalDrawPass[lm]?Ei.m_nTotalDrawPass[lm]:0)+$h["Time"]()-Ei.m_nBeginDrawPass}};Di.Shader["Common"]={DeclareVS:"\nprecision highp float;\n\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute vec2 a_UV;\nattribute vec4 a_Color;\nattribute vec4 a_Tangent;\nattribute vec4 a_Binormal;\nattribute vec2 a_UV2;\n\n/// ID��͸�����\nuniform vec4 u_Object;\nuniform vec4 u_EyePos;\nuniform vec4 u_Sunlight;\n\nuniform mat4 u_MatW;\nuniform mat4 u_MatVP;\nuniform mat4 u_MatWVP;\n\nvarying vec3 v_Position;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec2 v_UV;\nvarying vec4 v_Color;\n\n/// ����ռ�����ת����ռ�����\nvec3 ObjectToWorldPos(vec3 i_Position)\n{\n    return (u_MatW * vec4(i_Position, 1.0)).xyz;\n}\n\n/// ����ռ�����ת�ü��ռ�����\nvec4 ObjectToClipPos(vec3 i_Position)\n{\n    return u_MatWVP * vec4(i_Position, 1.0);\n}\n\n/// ����ռ䷨��ת����ռ䷨��\nvec3 ObjectToWorldNormal(vec3 i_Normal)\n{\n    return normalize((u_MatW * vec4(i_Normal, 0.0)).xyz);\n}\n       ",DeclareFS:"\nprecision highp float;\n\n/// ID��͸�����\nuniform vec4 u_Object;\nuniform vec4 u_EyePos;\nuniform vec4 u_Sunlight;\n\nuniform mat4 u_MatW;\nuniform mat4 u_MatVP;\nuniform mat4 u_MatWVP;\nuniform sampler2D u_MainTex;\nuniform sampler2D u_DepthTex;\n\nvarying vec3 v_Position;\nvarying vec3 v_Normal;\nvarying vec3 v_Tangent;\nvarying vec3 v_Binormal;\nvarying vec2 v_UV;\nvarying vec4 v_Color;\n\n/// ����ռ�����ת����ռ�����\nvec3 ObjectToWorldPos(vec3 i_Position)\n{\n    return (u_MatW * vec4(i_Position, 1.0)).xyz;\n}\n\n/// ����ռ�����ת�ü��ռ�����\nvec4 ObjectToClipPos(vec3 i_Position)\n{\n    return u_MatWVP * vec4(i_Position, 1.0);\n}\n\n/// ����2D����\nvec4 Tex2D(sampler2D i_Tex, vec2 i_UV)\n{\n    i_UV.x = fract(i_UV.x);\n    i_UV.y = fract(1.0 - i_UV.y);\n\n    return texture2D(i_Tex, i_UV);\n}\n\n/// Ĭ�Ϲ��պ���\nfloat DefaultLight(vec3 v_Normal)\n{\n    vec3 _Normal = normalize(v_Normal);\n    vec3 _Light = normalize(vec3(2.0, 3.0, 1.0));\n\n    return clamp(dot(_Normal, _Light), 0.0, 1.0) + 0.2;\n}\n        ",ClearVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",ClearFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n}\n        ",RenderVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",RenderFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n    \n    /// ������ʾ������\n    {\n        gl_FragColor.a = 0.99;\n    }\n}\n        ",PostprocessVS:"\nvoid main()\n{\n    gl_Position = vs();\n}\n        ",PostprocessFS:"\nvoid main()\n{\n    gl_FragColor = fs();\n}\n        ",BRDF:'\nconst float PI = 3.14159265358979323846;\n\nconst vec3 baseColor = vec3(0.5, 0.5, 0.5);\nconst float metallic = 0.0;\nconst float subsurface = 0.5; // 0.0\nconst float specular = 0.2;\nconst float roughness = 0.7;//0.5;\nconst float specularTint = 0.0;\nconst float anisotropic = 0.0;\nconst float sheen = 0.0;\nconst float sheenTint = 0.5;\nconst float clearcoat = 0.0;\nconst float clearcoatGloss = 1.0;\n\nfloat sqr(float x) { return x * x; }\n\nfloat SchlickFresnel(float u)\n{\n\tfloat m = clamp(1.0 - u, 0.0, 1.0);\n\tfloat m2 = m * m;\n\treturn m2 * m2 * m; // pow(m,5)\n}\n\nfloat GTR1(float NdotH, float a)\n{\n\tif (a >= 1.0) return 1.0 / PI;\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn (a2 - 1.0) / (PI * log(a2) * t);\n}\n\nfloat GTR2(float NdotH, float a)\n{\n\tfloat a2 = a * a;\n\tfloat t = 1.0 + (a2 - 1.0) * NdotH * NdotH;\n\treturn a2 / (PI * t * t);\n}\n\nfloat GTR2_aniso(float NdotH, float HdotX, float HdotY, float ax, float ay)\n{\n\treturn 1.0 / (PI * ax * ay * sqr(sqr(HdotX / ax) + sqr(HdotY / ay) + NdotH * NdotH));\n}\n\nfloat smithG_GGX(float NdotV, float alphaG)\n{\n\tfloat a = alphaG * alphaG;\n\tfloat b = NdotV * NdotV;\n\treturn 1.0 / (NdotV + sqrt(a + b - a * b));\n}\n\nfloat smithG_GGX_aniso(float NdotV, float VdotX, float VdotY, float ax, float ay)\n{\n\treturn 1.0 / (NdotV + sqrt(sqr(VdotX * ax) + sqr(VdotY * ay) + sqr(NdotV)));\n}\n\nvec3 mon2lin(vec3 x)\n{\n\treturn vec3(pow(x[0], 2.2), pow(x[1], 2.2), pow(x[2], 2.2));\n}\n\nvec3 BRDF(vec3 L, vec3 V, vec3 N, vec3 X, vec3 Y)\n{\n    //x��y����ֱ��ʾ�˱�����������͸�������������\n    //https://www.cnblogs.com/starfallen/p/3572352.html\n\n\tfloat NdotL = dot(N, L);\n\tfloat NdotV = dot(N, V);\n\tif (NdotL < 0.0 || NdotV < 0.0) return vec3(0.0);\n\n\tvec3 H = normalize(L + V);\n\tfloat NdotH = dot(N, H);\n\tfloat LdotH = dot(L, H);\n\n\tvec3 Cdlin = mon2lin(baseColor);\n\tfloat Cdlum = 0.3 * Cdlin[0] + 0.6 * Cdlin[1] + 0.1 * Cdlin[2]; // luminance approx.\n\n\tvec3 Ctint = Cdlum > 0.0 ? Cdlin / Cdlum : vec3(1.0); // normalize lum. to isolate hue+sat\n\tvec3 Cspec0 = mix(specular * 0.08 * mix(vec3(1.0), Ctint, specularTint), Cdlin, metallic);\n\tvec3 Csheen = mix(vec3(1.0), Ctint, sheenTint);\n\n\t// Diffuse fresnel - go from 1 at normal incidence to .5 at grazing\n\t// and mix in diffuse retro-reflection based on roughness\n\tfloat FL = SchlickFresnel(NdotL), FV = SchlickFresnel(NdotV);\n\tfloat Fd90 = 0.5 + 2.0 * LdotH * LdotH * roughness;\n\tfloat Fd = mix(1.0, Fd90, FL) * mix(1.0, Fd90, FV);\n\n\t// Based on Hanrahan-Krueger brdf approximation of isotropic bssrdf\n\t// 1.25 scale is used to (roughly) preserve albedo\n\t// Fss90 used to "flatten" retroreflection based on roughness\n\tfloat Fss90 = LdotH * LdotH * roughness;\n\tfloat Fss = mix(1.0, Fss90, FL) * mix(1.0, Fss90, FV);\n\tfloat ss = 1.25 * (Fss * (1.0 / (NdotL + NdotV) - 0.5) + 0.5);\n\n\t// specular\n\tfloat aspect = sqrt(1.0 - anisotropic * 0.9);\n\tfloat ax = max(0.001, sqr(roughness) / aspect);\n\tfloat ay = max(0.001, sqr(roughness) * aspect);\n\tfloat Ds = GTR2_aniso(NdotH, dot(H, X), dot(H, Y), ax, ay);\n\tfloat FH = SchlickFresnel(LdotH);\n\tvec3 Fs = mix(Cspec0, vec3(1.0), FH);\n\tfloat Gs;\n\tGs = smithG_GGX_aniso(NdotL, dot(L, X), dot(L, Y), ax, ay);\n\tGs *= smithG_GGX_aniso(NdotV, dot(V, X), dot(V, Y), ax, ay);\n\n\t// sheen\n\tvec3 Fsheen = FH * sheen * Csheen;\n\n\t// clearcoat (ior = 1.5 -> F0 = 0.04)\n\tfloat Dr = GTR1(NdotH, mix(0.1, 0.001, clearcoatGloss));\n\tfloat Fr = mix(0.04, 1.0, FH);\n\tfloat Gr = smithG_GGX(NdotL, 0.25) * smithG_GGX(NdotV, 0.25);\n\n\treturn ((1.0 / PI) * mix(Fd, ss, subsurface) * Cdlin + Fsheen) * (1.0 - metallic) + Gs * Fs * Ds + 0.25 * clearcoat * Gr * Fr * Dr;\n}\n        ',AtmosphereVS:"\nvarying vec3 v_ViewDir;\nvarying vec3 v_Scattering;\nvarying vec3 v_Attenuate;\nvarying vec3 v_AttenuateGround;\n\n//P and ray define the line; O is the sphere's center point\nvec3 CalculateIntersection(vec3 P, vec3 ray, vec3 O, float r)\n{\n\tvec3 PO = O - P;\n\tfloat lPO = length(PO);\n\tfloat B = 2.0 * dot(PO, ray);\n\n\tfloat C = B * B - 4.0 * (lPO * lPO - r * r);\n\tfloat det = sqrt(max(0.0, C));\n\n\tfloat d = 0.5*(B-det);\n\tvec3 intersect = P + d * ray;\n\n\treturn intersect;\n}\n\nvoid Atmosphere(vec3 mLightDir, vec3 mWorldPos)\n{\n    // ����ɢ�䣬���Ӧ�����㣬�����Ӧ�����ڲ�֮�⣬��������Ϊ���뾶���ڲ�뾶�����뾶ӦԶ�����ڲ�뾶\n    //650 nm for red; 570 nm for green; 475 nm for blue\n    vec3 _Wave = vec3(5.602046, 9.473285, 20.49314);\n    vec3 _ESun = vec3(20.0, 20.0, 20.0);\n    vec3 _PlanetPos = vec3(0.0, -6378137.0, 0.0);\n    float _Sealevel = 6378137.0;\n    float _OuterRadius = 6478137.0;\n    float _SampleNum = 5.0;\n    //Rayleigh scattering constant\n    float _Kr = 0.0025;\n    //Mie scattering constant\n    float _Km = 0.001;\n    //the altitude at which the atmosphere's average density is found\n    float _H0 = 0.25;\n\n    vec3 mRay = mWorldPos - u_EyePos.xyz;\n    float nDepth = length(mRay); mRay = mRay / nDepth;\n\n    float nSampleLength = nDepth / _SampleNum;\n    vec3 mSampleRay = mRay * nSampleLength;\n    vec3 mSamplePoint = u_EyePos.xyz + mSampleRay * 0.5;\n    vec3 mInScattering = vec3(0.0, 0.0, 0.0);\n    vec3 mOutScatteringAB = vec3(0.0, 0.0, 0.0);\n    vec3 mOutGroundScatteringAB = vec3(0.0, 0.0, 0.0);\n    float nInvOuterH = 1.0 / (_OuterRadius-_Sealevel);\n\n    for(int i=0; i</*_SampleNum*/5; i++)\n    {\n\t    vec3 mCrossPoint = CalculateIntersection(mSamplePoint, -mLightDir, _PlanetPos, _OuterRadius);\n\t    //AP out scattering\n\t    vec3 mAPRay = (mSamplePoint - u_EyePos.xyz) / _SampleNum;\n\t    float nAPRayLength = length(mAPRay);\n\t    vec3 mSampleAP = u_EyePos.xyz + mAPRay * 0.5;\n\t    vec3 mOutScatteringAP = vec3(0.0, 0.0, 0.0);\n\n\t    for(int m=0; m</*_SampleNum*/5; m++)\n\t    {\n\t\t    mOutScatteringAP += exp(-(length(mSampleAP - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nAPRayLength * nInvOuterH;\n\t\t    mSampleAP += mAPRay;\n\t    }\n\t    mOutScatteringAP = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringAP;\n\n\t    //PC out scattering\n\t    vec3 mPCRay = (mCrossPoint - mSamplePoint) / _SampleNum;\n\t    float nPCRayLength = length(mPCRay);\n\t    vec3 mSamplePC = mSamplePoint + mPCRay*0.5;\n\t    vec3 mOutScatteringPC = vec3(0.0, 0.0, 0.0);\n\n\t    for(int n=0; n</*_SampleNum*/5; n++)\n\t    {\n\t\t    mOutScatteringPC += exp(-(length(mSamplePC - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nPCRayLength * nInvOuterH;\n\t\t    mSamplePC += mPCRay;\n\t    }\n\t    mOutScatteringPC = 4.0 * 3.14 * (_Km + _Kr * _Wave) * mOutScatteringPC;\n\n\t    mInScattering += exp(-(length(mSamplePoint - _PlanetPos) - _Sealevel) * nInvOuterH / _H0) * nSampleLength * nInvOuterH * exp(-mOutScatteringAP - mOutScatteringPC);\n\t    mSamplePoint+=mSampleRay;\n\t    mOutScatteringAB = mCrossPoint;\n        mOutGroundScatteringAB = mOutScatteringAP + mOutScatteringPC;\n    }\n\n    v_ViewDir = u_EyePos.xyz - mWorldPos;\t\n    v_Scattering = mInScattering * _ESun * _Kr * _Wave;\n    v_Attenuate = mInScattering * _ESun * _Km;\n    v_AttenuateGround = exp(-mOutGroundScatteringAB);\n    \n    // Ground : v_ScatteringR = v_Scattering; v_ScatteringM = v_Attenuate; v_Attenuate = v_AttenuateGround;\n    //v_ViewDir = u_EyePos.xyz - mWorldPos;\n    //v_ScatteringR = mInScattering * _ESun * _Kr * _Wave;\n    //v_ScatteringM = mInScattering * _ESun * _Km;\n    //v_Attenuate = exp(-mOutGroundScatteringAB);\n}\n        ",AtmosphereFS:"\nvarying vec3 v_ViewDir;\nvarying vec3 v_Scattering;\nvarying vec3 v_Attenuate;\nvarying vec3 v_AttenuateGround;\n\nfloat PhaseRayleigh(float nCostheta)\n{\n\treturn 0.75 * (1.0 + nCostheta * nCostheta);\n}\n\nfloat PhaseMie(float nCostheta, float g, float g2)\n{\n\treturn 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + nCostheta * nCostheta) / pow(1.0 + g2 - 2.0 * g * nCostheta, 1.5);\n}\n\nvec4 AtmosphereColor(vec3 mLightDir)\n{\n    vec4 mColor = vec4(1.0, 0.7, 0.7, 1.0);\n    \n    float _G = -0.990;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n\t\t\t\t\n    mColor.rgb = v_Scattering * nPhaseRayleigh + v_Attenuate * nPhaseMie;\n    mColor.a = mColor.b + 0.2;\n    mColor = clamp(mColor, 0.0, 0.9);\n\n    return mColor;\n}\n\nvec4 AtmosphereLight(vec4 mColor, vec3 mLightDir)\n{\n    // Ground : v_ScatteringR = v_Scattering; v_ScatteringM = v_Attenuate; v_Attenuate = v_AttenuateGround;\n    \n    float _G = -0.980;\n    float _G2 = _G * _G;\n    \n    float nCostheta = dot(normalize(v_ViewDir), mLightDir);\n    float nPhaseMie = PhaseMie(nCostheta, _G, _G2);\n    float nPhaseRayleigh = PhaseRayleigh(nCostheta);\n    \n    mColor.rgb = v_Scattering * nPhaseRayleigh + v_Attenuate * nPhaseMie + mColor.rgb * v_AttenuateGround;\n    \n    return mColor;\n}\n        "};return[Di,Ei]});MiaokitMerge(function(mm){if("Sisyphus"!==mm["m_pEngine"]){return[]}var nm=undefined;var om=true;function pm(um){qm();nm=um.OnRenderingEvent;rm();var vm={memory:new WebAssembly.Memory({initial:64*16,maximum:32768}),APP_PLUGIN_TYPE:function(){return 2},APP_MEM_TYPE:function(){return 2},APP_MEM_RESERVE:function(){return 1024},APP_MEM_MALLOC:function(wm){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!");return 0},APP_MEM_FREE:function(xm){alert("SISYPHUS��չ��֧��ʹ�÷������ڴ�!")},APP_MEM_BASE:function(){return 64*1024*1024},APP_MEM_GROW:function(ym){if(mm["ShaderLab"]){var zm=mm["ShaderLab"]["PreflushBuffer"]();vm["memory"].grow(ym/64/1024);var Am=vm["memory"].buffer;mm["ShaderLab"]["FlushBuffer"](Am,zm)}else{vm["memory"].grow(ym/64/1024)}},APP_MEM_RECYCLE:function(Bm){alert("WAMSģ�鲻֧�ֻ����ڴ�!")},UNITY_CREATE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_FREE_OBJ:function(){alert("δװ��UNITY��չ!");return 0},UNITY_GET:function(){alert("δװ��UNITY��չ!");return 0},UNITY_DO:function(){alert("δװ��UNITY��չ!");return 0}};um.OnEngineLoad(vm)}function qm(){var Cm=document.getElementById("unityContainer");var Dm=document.createElement("canvas");Dm.id="3d";Dm.width=Cm.offsetWidth;Dm.height=Cm.offsetHeight;Dm.style.width="100%";Dm.style.height="100%";Dm.style.top="0rem";Dm.style.bottom="0rem";Dm.style.left="0rem";Dm.style.right="0rem";Dm.style.position="absolute";Dm.style.zIndex="1";Cm.appendChild(Dm);mm["GL"]["CreateContext"](Dm);mm["ShaderLab"]["Init"](mm["GL"])}function rm(){if(om){om=false;tm()}}function sm(){om=true}function tm(){if(om){return}mm.Profiler.BeginCycle();mm.Profiler.BeginScript();nm(0);mm.Profiler.EndScript();if(mm["WASM"]["Update"]){mm.Profiler.BeginUpdate();mm["WASM"]["Update"](0);mm.Profiler.EndUpdate();mm.Profiler.BeginDraw();mm["WASM"]["Update"](1);mm.Profiler.EndDraw()}mm.Profiler.EndCycle();requestAnimationFrame(tm)}mm["WASM"]=mm["WASM"]||{};mm["WASM"]["LoadEngine"]=pm;return[]});MiaokitMerge(function(Em){var Fm=Date.now();function Gm(){return Date.now()-Fm}function Hm(Km,Lm){if(Lm===void 0){Lm=0}if(2===Lm){console.warn("Track:",Gm(),Km)}else if(2<Lm){console.error("Track:",Gm(),Km)}else{console.info("Track:",Gm(),Km)}}function Im(Mm,Nm,Om){if(Om===void 0){Om=undefined}var Pm=new XMLHttpRequest;Pm.open("GET",Mm,true);Pm.responseType="arraybuffer";Pm.onprogress=function(Qm){if(0<Qm.total&&Om){Om(Qm.loaded/Qm.total)}};Pm.onload=function(Rm){if(Pm.status==200){Nm(Pm.response)}else{Nm(null)}};Pm.onerror=function(Sm){Hm(Sm,2);Nm(null)};Pm.send(null)}function Jm(Tm,Um,Vm,Wm,Xm,Ym){var Zm=new XMLHttpRequest;Zm.onprogress=function($m){if(0<$m.total&&Xm){Xm($m.loaded/$m.total)}};Zm.onload=function(_m){if(Zm.status==200){Ym(Zm.response)}else{Ym(null)}Zm=null};Zm.onerror=function(an){Hm(an,2);Ym(null)};Zm.responseType=Um;Zm.open(Tm,Vm,true);Zm.send(Wm)}Gm["_name"]="Time";Hm["_name"]="Track";Im["_name"]="Fetch";Jm["_name"]="Request";return[Gm,Hm,Im,Jm]});MiaokitMerge(function(bn){if("Unity"!==bn["m_pEngine"]){return[]}if(!UnityLoader){return[]}var cn=bn["m_pLogo"]||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAJvNJREFUeNrsnQe4XUXVhufmpveQhIQiNYEYiEASAkiL9CKCGop0AUEUVBRB+KWIYpcuvQqCSpEeEZQqkIQAgohAgBBDgqGmt1v+/f3n2/9dd+7up9wT/N7nmefec/Y+s8vMrFlrzZqZhtbWVieE+O+ki16BEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAgJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkACL5RZD+GaSj9NqFqA8aWltbq32NbYJ0QZAmmO/+GKQTg/S2ikCIj68G8LMgPek1fvD5IL0cpONVBEJ8/DSAHYN0fpC2yHDuHUH6TpBmqjiEWLU1gG609R/J2PjBF4L0Ck0CIcQqqgHsEaSLgjSyjDweDNK3g/QPFY0Qq4YGMDBIlwRpcpmNH+wapBeDdIqKRoj61wAmsddfowr39kSQTg7SFBWTEPWlAQwL0m+CdGuVGj/YLkhPB+mHKiYh6kcDQK9/ZZAG1fA+XwjSV4I0VUUmROcIAPT0GNo7sBPv98dBOjNIzXX4Lnvw/j50pdgHjGx0dqBToyuNzPiFjM8rVP3/nwFBWi9ILeZdNfDvG0FanDO/1YI01nvvKIt5QXq+4D32DdKWzMfm2zVIrwdpRjUFwJGu5OjrUweF9VqQvhqkv9ZZJcKw57P8H0LgpSA9F6SngjTdleIcat3o9gnSoazYzlTs913J0bpYbf//+Czrd5PfPoJ0CE3RPGwfpLuNsA0b6p+pQRdhlCuNkvX1BAAEPCJtzyiSadck4eBKXn1kvmcdFRbu6S8ssB9SqtYDR5r/B9GHgYT4hiUUCNNcybkJx+ZbNdBkNg3SARHfQwB8fxUUAPBZ9XKlkafVg7RWkD4RpPWDtE6Qzg7Svwr2ruvGHOtVUPMaGPF9vzKffXDM/fQtmmnXFJX/lTquDCcEaT+qbp1tEqAy7p9wvDfVN6SvBWkBVUGYCo8G6ZkgvVeF+4rTOBZFmAVgPHuoppjjlaQ7BeJt/L830wBW9CF8r0NYF4cxhd8NYkOz4J3+tMC9JNWflgL5tRa4TpY8myqdb5IAeDdIv+9kmz+NX9aJP+ArLt9oSP8g7cD0PfoK4OB8OEj3BunNTnoOCIBTa3i9WykAvuhK80Z68t30KJgfNNWfe40WPec3g/SAK81GFd7LiWNlkA6qIxXbBzMKL6yTe/kP7bui7wqqLCZIXUQtobOotY9iCf/OoSo/tIzG7/juNvK+gwl7nisFqu2mJp8sAD4Tcc7edXjfC2JU7r2oRtaaq4O0e5A25/v6SZAe433mAR7nP/0X1kOEfr9TgXx6ufZOtgtc2xwT+AjucqVQ81WRhQmmxbJKmQDwrJ/OChwC+xQTfL5bRy9jnwjVH6rzTmU6WsplLtP9/AznFKZCT3Qlh+BGtHeTtJoFFbyfZQl27aI6Kk84JTG6M7zg75cGaT7ffTd2Ar+gv8UCE+NXQRoRpJOCtLxKz9OUwzcAzeeQDL6D4QnaEerWd1JM+rC9z6BpH+sDwFj2R0G6zHx3ClXUEXVQWS5k7+r3wOh5n3f1FSPwJlP4wj/lSguk7EihsIZXyLeWca11qAK3MiG/sTHn9qYGhYaD0Z5GVoyuNX4/1qONUZHtIyp+F9c2Jm8FGOrBdJpd7zB9yMY3nI0iDqxDAa//UTTfygECp4/xO7QmdEJd6eMItW8I6A29DrcIOzJl4bEkAQApCi/speyJfus5WF6rA1XxW953cAQebdSkSrImBWJ3V55XvJUVZAULHQ3vLAraPWmbzqS2VRRoP9dlPBfe9JsjtA84JE9w0Z7vJtroZ7An9cG9X8E61ZCx4Vin3B18H2+zUb/Pz1dG2PUrKQDeiskbwmBX3s9+MefsRU1t/3JUaFdykv+c9xSWdc+YcyHgXuD7wXu6ls9dSxYnmQDWJ3ATK+Xf+HkGG98FnSgAPud9PpGqT0hjha8HYXhEFbWDq9jrD2UvUo720lTm/aAuvMoUxxcS1FDEZdxQxvX/yOQT5ZhsyGDqzWPj/KWLX2sCGtID1HZbXLG5MX1d9hGgXq59vMEQo7E1dEaDSntgDEsN8tTvJzup8Z/g2g+PQcW7qMrXRKVYUqW8rUbxrsu2IhKeedMqPmsax8ZUVKjRk6twTz1deVPWITy+4UpBT3H8icKi6HXKFdoNNW78jXkEANS0h7zvJrnqB4n4PB6kX5vPfdx/n7cc2tefaZYN6ITrb06/RRR3uuoMF7eUKbBCznUlp5/PFdQOOtMh2ky1PCktotkY1+5W8py0fJYwn1gTIE5Nghp1Mj/PpfPkuhq9oBURdtxkV7t5CdVaODWryo6RBHi0v8jPcCReHKTDvfO6l3k/acOnR8eo/81lqv72PbdkbOitEY2hIaVjuoD3GmqNl1GrDDu6zqgffegHGRuhFfrvYATNxSjT5wb6qtLac0OaDyAO2NmI2AonRVzvSkFCu9egAX4pSB+Yz990Hb3F1Wz81fKMb5ThnEkUvn6c+mGuNNHofPPdK6wILaZXQK89ISLfhey1V/AZuzC/ONZhOUSBUOZyF2052JWiKZu9Ro77Wi9GM72GvV4XU7nxPMcFaVbMdS5mo4NQ/XqFNNmV7FlbTGPt5qJj9pt4bjjysoLfvVrAbLR84ApGj+ap3BhnH256LlTOd6rcE2O4wnpJN3C1dUL+25WGPxsLVBZUhNGuFOIaBWIZMMowJ+IYnII/cMnLpkPiY1TkQX7+m2tz2Fq/SZQAwLyDY1z2yD+oyYNjjl3misXLO69cJ+YUzNsU1GR+WuE6cjvfe4tp5Nu49iNoIY/xvTcyfZTjOt0TfAWFnd95BMBg2uHH8fMiagH3VKnxoWEc4n13q6stiyj4ijI34Rga+QERAg3DVwhdTXP2wUF2Cxv4GzHn9EhoQL0yCoCR7J2j+HuFyr9SIchLPWF0LoXw11LKohzmM1nWSLi/ovM8mgtoBhW3X471Kua9MZKuEnzOe+jDXXxgS72SNpX0KNc2ZjyAtv5kl83TD1vuRld8lCKr5/lMF+90hD29vM7eeSgA4Pk/nf6jhxI0hmrQLUd760JB3T0hdeM5rQll2S0ljx5RmkIR+xbOPzth5cgg7eyKh3FGAbt3uteTXew+foxxpcUoEPxySQ4Bdy9NhHICh2zD3YKV6FnvnN0TbH/0/jdV6D00VDCfJfQT2bUkR1OwnuRq57zOyk4U/Gk9fM8Ecxua8g4pHToa/x+cF3VYRABgyui+rjSxIrR59nWVW70Xzix/3gEqe/8aFEZXOp26FKx8zXRA5VFpEVvRz2Wbw/ACK/ZtZT4n7hMhqFvRl7Mzha4VAP1ZMRtjKuTFfOaik6+Wufbhs81eDxdGT8bZvs08bo8tYM8f5TuBFoPIOzhfT6sjAYA4m83LzGN4xg54WiU0gFD1u8t8nuoqN2FonwhbuVZz1Neko2ZAAbuqgRUQMdmv5rxmGggUgsf/0gh7s+hzIrZiYIxGAM6hhhLHKUwNBd5T2GmE7wlm5BOe/d5Mtf38iGtAwB5m7OlG8z20U3jFV4u5PsKdMQHnq6724//NEX6clhpef0WlBACGhRAie4NXIfZ12Ya34kCsgT/f4NwavqAG9ny9y/h9JaO6MMR0PYVrkXkYcfZ5T9cxXt3WBYT8npjynOWUc6tr76B820UvoHpMgjYGE/H1iO+fpTZ6Y4IvBSrzMGoKM6pQj+IaNbS8vahFw3mL4Km7O1P9KCeI4ccRlX2fMvJDof3K+w7e1K/U+J00lfnbSkVJYqLKRFdyvL6Ws0w/ycp9ZE7zB2xMTaOaO0cvz9DzYfThoAQBEgaI3ek6et2fp//ioYT8d3ElJ6FzlY9sjXMCIn7lPpq0e1MIrezM9l5OkAvUyINd+1GAV2kG/KJAflGzturJVqsFqAzP0VFzZ07NA6rvHnQqjXf54zPQIPuy5xxWB+/iuAS/D/wHX6bG2I8q/QGeRjCHmgzCfaMcmVhY9kzz/orSl36jjSl4N0mw6f0GuIRm4xtex7OcdaGby7dCEoTiugn+pI6ORiwLbtKC1ny87P0+TNNz5nNIRB4Dg9SUM5+/xdxP1rR+kJpbi7MwSKNMftvl/P0zQepR4L67BOnR1vL4VZBuaK0NS4O0SUo5vJ/w+6gyejVIYyLy6hqkS7xz7w/SIHPO/gnX2jHl3d8epOUF38PvWXa9g9QrSN2ZJ+rQ74J0cpAaeSwtod6MDNJ/Et7ZLv79lxvmOopq6iPe9/AF/DtjHpNddCzBt1zlp/emgRBZhJj2csmrswx10UulLXLtw5bz8in2VtcX6L2LLGwxn2oyotkmscfMYr/PYi/VkHIe3uPaBXrY7yY48eJMV5gM91KTfM4zy05guX2DKvghFXKmOj5j0XkYK1z7Gadoj1/n86MnR1AYJr1l3S0bw5+rxxxDG3240hoAuCdGMh6W4bcrKb2ifj+nwL2UqwFkTV+Nuf5k77ztUrSnqJ7sg5ieLC2dl+M9oZy/HaR1+duf5PjtiiBtFaSe7LniEo5/hmWcRwPYkseTWBSk12KO/Zvv3c8XPelxQVot4liSBrBDynu/ogxN6Hpzb3sF6amIc6YGqX+G8t8pQRNpCdJuUb+rhKMHgSwbRnx/I6VtEpjhtjTi+0muepuOlkt3DiFFkWe3ot+56ECeQdQAVst5XzNznIu5AOfRToaN/L2c11pMO3xJQlrm8kcpdqX/qGfKeejNj455f2vHOD+b+awfZLKN2/sbQq0D94VFPEabnnZezh5/Gp2s2LHpbH7fg/9vHfGbLXl+khaFe7okQROBZvRgpUcBLMcnNPC4oajbEoZAjqtjRx0805vFeLb/lLMRxk1sGlvAEz83xiSJcxr2oBf82ALvoLHC54Vg6DHL2na9aIbA8TfbO3YFVf2sXvEeLjkI6wzWVcx6nE51HEONx/B4ntWMEWPyaar5vzVCewnvOa68YLL8NEFoXkkHpIupA2fEmbSVmup6oGtbL8BvFPu5jqvFLHbxIaZrcoimHhno4vdgezyHrRZ6jy93pSCnzWLeKXrorMtYzzN2/QPUwOCN/mGMAICHGXEcGJeeUAfvdiyHx7LQyvf3D45E3c/PeNazWK+HsLygUQ12bbsNDacPZzC1LKS1UjTcKIZHaADz6X94l/6Uxoj2EDfM/DTrwq9jjp9Cbfls73sMnX8+4f4hOP6epHJVAqhdu7Pi+aBXvIkqT8gBCS/iy3Xc+//Ixa+MfI3LN57claonKmzckB9i1zFl9JyMJgDWbcDsvDBuYETK9WdSS7uPDsgo52KXGrxXNMarY3rippR6+jg1xonsPP7KBj6I+fVy1VnTYSj/4l1fRifbNL5TqO37F9C4ofWNT2gDZ1HND+MXfpKi7TzqOsbWVNwJGHJdgoMCuxC/x/PuSHFmTCnjHqrpBPxSwnX/HuPMTHIC/o8579aU5zqz4D1/Jya/mRxmtcNur5rjGH69OEgfxTgBN8t4/U9ndAJeG3Offw7StIjv4ezatMJDuHn5U8Jz7xDzm/szvLO+QXok5dqXsXySwHDgRmnXq6R03ztFZTuW9shhCeeNqBN11GfbBNUM/CzGmZmVU6k2xvEDOseqtXjkm9TKwg1Kz+bz9qzR++0Xo32c77JHZr7n4lcCqgZrJjjdyimnRdSWk3Y5hhP6hITjy+mjSJ2TUkkBMDRFCGBln1EueUvqL9Vh4x/nStMoB8Uc/yuPlwMiwdImUsHHcrOLX5mnXJ6nKn0lTZ2erjbqP4haDhymzEMu+9bXaDhvV+n+WtioPqSwhDPwGVe9OJXZ9CEUFWgnuYwLtVS6gNPmAqQV0M511vi3pn0eN2NvMRtuUwWuBYdc2lz1g+hT2aJKz3uHaxuBqeUuQU+49oE5y+nQW5mjjra6jiMCaY16GZ14SUN5/+NKe2ZOoFM13N3pqDK1vjRedqWAun/l+A2e53uu/a5eqY6oSvKZMh1B29dR44cwu5ae4yTV/NkKXhOSe1OXvEMwnEQY08W898vdxwP0dJhSvis/X8deNu9OwW9QaCxgb/0hTQP8xU5Dc9jYP+D3cLBi+BS7M90Yk+eDLmIefY2AVoZl8M7IeD4coufluUClBQCmiGIyxEsFfrtfDVXOLDb5OS45xPPODC8771zv+bT/MFFl7RRhCSm/F+11DPPUck/ERRU+LzSldmUj/WFBW/oSmmP/oRBYnlE7SwpY6t1JdXBPmn075vjNRFeaVXshBceSWgsA8LmCAmDbOmj4iL/GPm8HpJz3ois5NdMaXZGdiuG4wRDS3a5tqClJS1mfBf9+xPFqCAUI6YMzqNtQyUfkEOqP8+9ZLnql5CzMKfjbStvyRacXd2fDxyKmuxX4fTeah9dTm4QGe3uS6V0NATCu4O+26eTGjxd/tUtfoQfqKkKV383Q+I8v6H9BUMiBlOJJTr/3WFnejzk+sArvqdFli0vIywz2XDe4VZ8hOc9fm/b+ESnmXx424/vElPq7WJeecF5kbjUEQJGeHL3YqE4uNDhbnnEdNyC1QJJ+nr00bPFzXVvs+0Kq/M1sJNu45LXe0majYeYWPMGYM7BGjNp6hOk5N6f5BXsXzimstX/MKtRo5rHXal3FGjtWx9qQwngpO5C06E2YNhjd2I7aJjqfPGswNNG8yiLgEbF4HBN8Cthe7h4Kg6oIgOHUAqbn+M1udVCQGN45jNJyYkzPjwYZOv0w3XlCwV52uYuamtmRx2jnI258tHcM48D3m88Ipb3GqKANq1hDWtUafsgmbFBNFP5Zhk/XZtkV2egVHdV3WF8vyNl2Nmd6JxQA1XK67VTl86sFHEeYePFyxEvf2xNqcDQ9UvA659GPkIVweSs7cQp2sj9kCC/6StPDJBHO1hPlM5XaC0Yseqe0qbnmb96RBQw5I6x3BwqPl6k5nODybXoCjfHyLHZouVIxD2PqqEDn0P6eZ1RxNMCoiT5PFcj/WjbgPMym6QGT44oYGxw9wsyM+b0qAVAx4H+ZkkNYhCr8aS77ojl3UCvFqID1PcHkRMQmhs+vcunL0eP46c7EL1Qr2COPPd+bPoB6Ar0zFiMNF46MG856Ooe6jd4ZC6n+oKC6i8L+fkoPgYkpIzPkVc7mGM3UYN526SsCoVxPdPUzvFstoE7vl3IO3tedngZ5ZkJZtLKnh5r/UEreWAvxWOb1bde2n6XPDaHqX20BgKEIeMEXZjh3nKtdzHke7nbpSzZja2cElQzOUEHOKMNkyMobGYTQj1z7PR3iCKcM+zRSC3k9Qx7wRH8z4vvuOXwUXTJ+Vw7l+kumphyHin6M67hsG4KPEPexs2ee3cN3/HDO+4BGiiFkOOIxOoSRhT7mHjpontUSAChgOKUezSgAVmX17wZW9JaISgVnH+Lcf+Nqs/wzNJf51FiaKICXU0jBhAl3ss0Cfj+LdaTVNDyokb1y1IO3XPvdlRv4LlZmbJitERpTpZ2cDSbfIsIBu1lhGHMINbElVNXx7E+yQb8Vo00hdPcxCgfshv3bHP6hOMKdomGKY37NJPoPOvgKME3Xfl7gigWvRHGSy7aVNx744Apd80nXOQFFDa4+vNiQ9oNo4zWz8Te7YrvvouEPiFFNF7hsEXZdWZ8aPAEQ5pEWqASBM55mYov3++kueWJZHhBwtWnE/eBaiLLMso33Wjx/Kd/3Upd9jsi2NN/mVale9OO7aqmVBuBc9o0uR7pVn3oZwlpcwUbR5OIDjPLk8WEZv2/JoF5XgncLqNtRNn45PXY1WZjHvqoUWRv2Gk4I0SlUUwBkiWwaKgEgxMdTAAzP4E/A7MFGFYMQHz8BAE9x2vj+SBWBEB9PAeAyCIANVARCdB7VXvZpvZTj69bRu0AsNzZXwCwtzOzyl2JCdCPGeeHV9tc7wO+wvvxHrm3oC+O6/rbeo3kevOv+fAMMQw1g/rgXDOkhLNkP7hnD8zBk5C/6iOWq+sdcG9oWdrOBZx7zC5ZHmGyY1dbKZ7c76OCdbOPadoBC3hhy9ZfE6s9nhFk3w3UMfOnt2sK+MdYdtWBFA03DDXg+Yhre4jWbeWywSx5CRB6vuPbDdyiTT7NTajbPkDZEimHVcazL3Vk+eD+Iq8gSy4DZgRgRW4sd7rt89hkRzzCO7ycs+ykuen0DvOdN+JwLeS9RI1Gfcm2BQAha6zgDtYLLgsftOJu0LPFfK3y9cpYFxz55L3BJ7Ge4q2x4rDeX/saxGUEaYI71C9I/eWwyd0bG/49xOfTwvAFcehvHXuTeeeEx7Ff3Jo/dG6SX+L+/jPTQIM3msSnePa4RpHd4LGqJ9nPNst5HRxy/m79dHKRx3r55L8bsZLyHl8cXuAx4E5fN7uIdn8jrr+Bedv49HBikh4O0xLsWPt8SpG5cMruZqcnkt9J8j3SUyfdQlpHP09y/MKo+oHxOCdLrMUujH55Sn1YP0kUxu/Vib8MJ5txNuMfmCu+8uUE6LeI97s7nXcn8143ZYXmeOW+fai8LHsXaKccH1pEGMIe9AnqvjT3tZEPTs63PXsiaMRvz2MPsHRopoYd7GsRIHtvItd9P8ZPsYXDsL+Y+NnPtVyMew54kzH9dT4MYxmNRe+Zdyx4A4b3Hu/ZhvugZ9+ZvEbkYznrEeX9g3uhhnmNPEvZWiG23MfCN1IDwFxOo/M0xGnndbp72CY0Hoa9Y+2Ai/UdLqeUs5ef+7DG7MDXE5BceD3tX7DJ9I98xvnvWaHdbudK+eXt69wkNC1GTPzNm6gw+/zu83hspmi/m3Z9IrWsl39vzLANMxJptyhQLvX6W+c5g+a1g/cH8kYsitJKuTMg/ai1OhBcPNecN6AwfwPCU4/3rSACgkJ4wKq+d0LSlV8Hs7MXx/A4NBOvaTTPCzeaxlfm/u2s/FzwMmkIFfci1rTkwLCGPPq79rMtx5jmiAkteZyMLz93DHPs6nwFBROfyO8wbD3eVQWXdlWYAnvdYNkw0XMxGC4dyfTX0TNd+We/WmP/PdW17FMK8OpLq62i+J0zRxjqBLTw2nveHZ1jA393M34xlwgo4E9iIHc2InfgMeP4T2MhgZlzq2q/igz0Y9uL/KNMdeb1wkZedYoRs6Pz+jWvb7u1mlhvueWv+HjH6CMvFHJjL2VGi7LH9F+bRbMtrvmLKx27/5c89iVrExp+cFL28epVNgOkJKlI3qij1YgKEO/m0MK/TzfdXR+zMEh673KhrvanahnzDnHezl8cvzbEb+d2bVOs/Z847xpx3p5fHD8yx2/kdzIceMc/3CbNDU7iV+Siq/eD8iN16oE7vG5GX3VL8VH43KaJMTvW2sA7Zld9NMLsHwcxaM0d5DeN26uCCiOO/M9vQ7x5x/HxzPyfyu63M/WC77j4569ARJs+bUs79ojn36ojj2wdpGY8/Yky+07x3PI8mYPi79YL0oXfOdzvDBEja1GFAnWkAoaMkDOncwvTW49n7/Ns71mj+n06n1kuubYedccb5NY5SPir/sLeYSifdC65tCvJY877GMo853rHerm1vvykufkdm3P9V/H8XahAH8/fhluGOjspwpRmorVGbTFxpet9QhQ5jzd8zZgTmsH8i4Z0f7tomHJ3u8i3q2dO1TdbxHdpruLZZdlOokvtcZRyRYY//RZPXuS5/aHU4rwXOubNTzg179RUueuepx41WuqUxR0LT+T+sJ0Nd+9WDd+Y5s837HNgZJkDfhGsMcvnXfa824ay50DZrZOUdRY/yTTy2MW2v1Y2KHqrd7xo7eYzxIYxgw7jF2OwQgOsYn8ITRuV+2cvjk7wXFOhtxsvbnXmv7+URx695H6jk5xg7/ddGwG1k1PqnXPTy5m+a59zAtW12GnrhL6Uggmp9micg7P8TTH6PVrAsNzKq8pMxXvJXzWjJBhwpGGfK4Mmc1xxiTLvnXPKU6e5GaL/h4rfxetwI+Y29xjyd1wF2U559+fdBU6b9OkMA9Hbxc/0H1enQaDj55BMcwtmcggoV4n5W3IGsYKPYiFtc2+pALcY+3JC96RZ812+anmgoj3+S+aPxPM1jTcYPMIrvMeztX6GjMHSyrm8clMtd+uSZ2UYL+ALzx7TfS8w5w0zdmJWSV1i5+ptG1o8CMVwA48u8xyWeD6Cb8RO95fW2R9N+vpHJ2tVZGGy0g7iVd5q8ZxhCoR46hRflrDtDTUOb5ZInifVn3Qh78jhNw04yWt0TAHYS0/bscIe5thmx9xqhnEkAVLpH7uXiN1boW4XGW4mFRaYY4TXSta3s+3dK3NlmTD+skHOptvt5hOPiWxh1OlxDroGNP+wFZrr28QVPG3V8jBEAz1HYLGT5bWLyeMU4jtK0gLme0+s9z1tvG0kcLTFOvUYe+zHVW5TL9/nMzeb8LmY0otnLA6o45rIfynSYy7fSlDUJmjM+Q1fzu2aXf2OXbubdpU0F7mIEVNJ1ohyn/YyZ8YDpsMZQo1qN5fuYuY9MowDdK9wgexgpVwsBUIl5BWjIHxoP/2amUS81au9YIxymufaBM8+a3m688dZP4TDQy8arP8Y0+CVeHk0soy1d26rAUyn5w4a+jTn2lMsWnPK2qTi47zu84wsyjuSEE74WMTUYE6AP3+UNRtsYb/JuoHCYb3o32wFheSsMf/3RG6nJysKI+/RpMM+3kOW+2GgQvXLWnYXG/5I2GW6JKe8kc9huDvOupwGEmuJs49cJF9h9lEJ9eR4fAFYcvb7CjbJLgopWKfDif+oqs7vwXNPId6RNZ9X66abhjfXsNGfU2X8Zh8xoT60P7bbtjBDxbffXjH26G+38pea34d+JRgN4IsdzrkzoqWaYBrRlQuMfbZ53pSeAw3KHFvA+K/jXzDnh0OkMfh7p2s8NwTAelhO7sGA5zvSEcBTrmGvOYoMJx/f9eI+sdecd459JquOLzLVGJDhKQx/JcvoJupjGjO+WsacPbf/QeXuXuU6oNTSmNc7Haa9twga1qAINql8G1aYosKlPpgPnNNcxvLYIzaaR786KMMsIhWmmgMd4trttXGEDxVj1WmzMr3h5jKVjZ4XruLLsUpodYE/2BC+5tpV/nzGVe32en2ep6S6mF/SXvZpl8traVELLJNM7PZwg7HG/Fxizqb+5LphszMWTK2jWvWbMsh2MkLTsbxrTX4zjLFTnT8p5TTTGcAFPlPlxKec/aLThQyOOjzQ9+gt0KvZzbeG9obZyH/+O4zu2S9YvNu+xR9be+Z9sUBuwUGZWQQCU42+YSkGFF/Qrz36tBE97JsVU0yO+4KnIcDAlLRne1eS53PgClns97ssJ92HzaDYmQrNXZjM8E+siOi63zvn80HiuNBUHG5Gu52mK4Y618136dl4Xu3gv9y1G0zmCPf46MbZ8HqDZXGHexeVeLwvN7Hv8H/Xnt/z/NnOvh1B4+WtWrM22g3eDQCNE8oXReJebRodAqG97baA7hUP47OEyYIhY3Nuch2teamz3K/hM/U3bmW867ve9jvwdY2qE5dhRmGYMbmgM0pFBerJAcM7OMXl+t0BedzJIxlU5bezFo3/LHEMwxlRz7PcxeWzBWPWQr3hx5v8wx65NCEyyHOzNQbBx6pckBKQ85M1LQLqGx94N0loR125gIEvIbM4x+IP3bo43vwkDgRBMNdbL7zDvWXY1x3Y0AUrhPWFOwH1Bes18f0DE/I2PYp4/LKvbzO9n8blvNwE24Mve73YJ0kJz/G3G6t/COR4IvBkRpN3MOdNMoM5XvWfFHJA7GJj0LMt+MM890ptj8EcGBdmyvZ2Bc2HdnM/v7XyH+8z5h5rvf26eYQ3/HRVpHHtHRKQVEQCn58jjqiBtU4OGH6Ye3gSYT3vHr4uJ9rOpjylENIjNveO3mjyOjsljECMMw2i2jb3j95g8DvKOHWCO3R0hAK7nMVT0tROe4dKISSpgDiu6Pf8gc3xcRGN83Bz3I/PGB+nPntBs9QTQDt5v1jPC6IqYZ+jPBhWV7yw2wKjfTeSEqzgQHbmt+fywNznrME4ci8PWh6P5Pn1Wsu73NeduaY4fYr7/mokKtNGU5/D7ZRRa7Z6ziHp1HxPGHY+NsV3KcQ6GvE+17DLXcWputVlOVXRzz2sf8juqVk0uftOGcCun0fS0z/CO/4bq30rjxPH5iCrmCHqAfVPsOpogy1zHXYomU22Ef+CXET6Xu1zbhJsPE57hJPon9nBt04mhsv8h4r5fpLq/wnXcPhy/O4vDeysiTIJn6MTdjQ7W1c07+Cef7wXvNx/wHQ9x7fdJ9Ec0vsHf70a/xQr6Y7AMd1ywD2xobNx5IEdrBtI0+ogm3HSWyYX0Bf3Cc6jeyPcxif6HvizrcCehN82517B+HMiybqQK/wCdoUs9R+N5NAPs8uH3cuh6rjfE+xjb0HxvpKrkiPGWBS/CSDo7DnfR+9nvYhwsFtiQUVtcvUKb8lKXvoOuEKIKQ3R5va1wFCKq7VTjLXfGmxqFH3OAISxEfyHY4ydq/EKsGgIgBF7yn7vSEOIR7PUXuviJKQuZbqV6CZPiWhWJELWjEiaAEEIagBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhhASAEEICQAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghASCEkAAQQkgACCEkAIQQEgBCCAkAIYQEgBBCAkAIIQEghJAAEEJIAAghJACEEBIAQggJACGEBIAQQgJACCEBIISQABBCSAAIISQAhBASAEIICQAhRNX5XwEGAHVg0DudDdzFAAAAAElFTkSuQmCC";UnityLoader.Progress.Styles.Dark.progressLogoUrl=cn;UnityLoader.Progress.Styles.Light.progressLogoUrl=cn;if(UnityLoader.SystemInfo.mobile){UnityLoader.SystemInfo.mobile=false;UnityLoader.downloadJob=function(ln,mn){var nn=new XMLHttpRequest;nn.open("GET",mn.parameters.url);nn.responseType="arraybuffer";nn.onload=function(){UnityLoader.Compression.decompress(new Uint8Array(nn.response),function(on){mn.complete(on)})};if(mn.parameters.onprogress)nn.addEventListener("progress",mn.parameters.onprogress);if(mn.parameters.onload)nn.addEventListener("load",mn.parameters.onload);nn.send()}}UnityLoader.processWasmFrameworkJob=function(pn,qn){var rn=UnityLoader.Job.result(pn,"downloadWasmFramework");UnityLoader.loadCode(pn,rn,function(sn,tn){pn["mainScriptUrlOrBlob"]=tn;if(pn.isModularized){UnityLoader[sn]=UnityModule}pn["instantiateWasm"]=function(un,vn){gn(pn,un["env"]);if(pn["wasmBinary"]){WebAssembly.instantiate(pn["wasmBinary"],un).then(function(wn){vn(wn.instance,wn.module)})}else{console.info("MiaokitLoader.InitUnity.instantiateWasm error!")}return{}};UnityLoader[sn](pn);qn.complete()},{Module:pn,url:pn["wasmFrameworkUrl"],isModularized:pn.isModularized})};var dn=null;var en=null;var fn={};function gn(xn,yn){Object["assign"](yn,{_Init:function(zn,An){bn["WASM"]["m_pMemory"]=bn["WASM"]["m_pMemory"]||en.Module.wasmMemory;hn(xn,fn,zn,An);jn(en,fn);dn.OnEngineLoad(fn)},_RenderingEvent:function(Bn){dn.OnRenderingEvent(Bn)}});bn["GL"]=yn}function hn(Cn,Dn,En,Fn){var Gn=bn.WASM.GetString(En,Fn);var Hn=JSON.parse(Gn);var In=function(Mn){var Nn=function(){var On=Array.prototype.slice.call(arguments);On.unshift(Nn["m_nAddr"]);return Nn["m_pFunc"].apply(this,On)};Nn["m_pFunc"]=Cn[Mn.Call];Nn["m_nAddr"]=Mn.Addr;Dn[Mn.Name]=Nn};for(var Jn=0,Kn=Hn.List;Jn<Kn.length;Jn++){var Ln=Kn[Jn];In(Ln)}}function jn(Pn,Qn){Qn["APP_PLUGIN_TYPE"]=function(){return 1};Qn["APP_MEM_TYPE"]=function(){return 1};Qn["memory"]=function(Rn){var Sn=32*1024*1024;var Tn=Rn._memalign(16,Sn);var Un=Sn-Tn;Rn._free(Tn);var Vn=Rn._memalign(16,Un+Sn);if(Vn!==Tn){console.error("miaokit.prememory: addr error",Tn,Vn);return}if(Vn+Un+Sn!==67108864){console.error("miaokit.prememory: addr end error",Vn+Un+Sn);return}Qn["APP_MEM_RESERVE"]=function(){return Vn};return Rn.wasmMemory}(en.Module);Qn["APP_MEM_MALLOC"]=function(Wn){return en.Module._memalign(16,Wn)};Qn["APP_MEM_FREE"]=function(Xn){en.Module._free(Xn)};Qn["APP_MEM_BASE"]=function(){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Qn["APP_MEM_GROW"]=function(Yn){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0};Qn["APP_MEM_RECYCLE"]=function(Zn){alert("UNITY��չ��֧��ʹ�������ڴ�!");return 0}}function kn($n){dn=$n;en=UnityLoader.instantiate("unityContainer",bn["m_pEnginePath"])}bn["WASM"]=bn["WASM"]||{};bn["WASM"]["LoadEngine"]=kn;return[]});MiaokitMerge(function(_n){var ao=undefined;var bo=new TextDecoder("utf-8");var co=new TextEncoder;function eo(fo){if(!ao||_n["WASM"].m_pMemory.buffer.byteLength!==ao[0].byteLength){if(!ao){ao=[]}ao[0]=new Int8Array(_n["WASM"].m_pMemory.buffer);ao[1]=new Uint8Array(_n["WASM"].m_pMemory.buffer);ao[2]=new Int16Array(_n["WASM"].m_pMemory.buffer);ao[3]=new Uint16Array(_n["WASM"].m_pMemory.buffer);ao[4]=new Int32Array(_n["WASM"].m_pMemory.buffer);ao[5]=new Uint32Array(_n["WASM"].m_pMemory.buffer);ao[6]=new Float32Array(_n["WASM"].m_pMemory.buffer);ao[7]=new Float64Array(_n["WASM"].m_pMemory.buffer)}return ao[fo]}_n["WASM"]=_n["WASM"]||{};_n["WASM"]["HEAP8"]=function(go,ho){if(go===void 0){go=0}if(ho===void 0){ho=0}var io=eo(0);if(go&&ho){return io.subarray(go,go+ho)}else{return io}};_n["WASM"]["HEAPU8"]=function(jo,ko){if(jo===void 0){jo=0}if(ko===void 0){ko=0}var lo=eo(1);if(jo&&ko){return lo.subarray(jo,jo+ko)}else{return lo}};_n["WASM"]["HEAP16"]=function(mo,no){if(mo===void 0){mo=0}if(no===void 0){no=0}var oo=eo(2);if(mo&&no){return oo.subarray(mo/2,(mo+no)/2)}else{return oo}};_n["WASM"]["HEAPU16"]=function(po,qo){if(po===void 0){po=0}if(qo===void 0){qo=0}var ro=eo(3);if(po&&qo){return ro.subarray(po/2,(po+qo)/2)}else{return ro}};_n["WASM"]["HEAP32"]=function(so,to,uo){if(so===void 0){so=0}if(to===void 0){to=0}var vo=eo(4);if(so&&to){if(uo){return vo.slice(so/4,(so+to)/4)}else{return vo.subarray(so/4,(so+to)/4)}}else{return vo}};_n["WASM"]["HEAPU32"]=function(wo,xo){if(wo===void 0){wo=0}if(xo===void 0){xo=0}var yo=eo(5);if(wo&&xo){return yo.subarray(wo/4,(wo+xo)/4)}else{return yo}};_n["WASM"]["HEAPF32"]=function(zo,Ao,Bo){if(zo===void 0){zo=0}if(Ao===void 0){Ao=0}var Co=eo(6);if(zo&&Ao){if(Bo){return Co.slice(zo/4,(zo+Ao)/4)}else{return Co.subarray(zo/4,(zo+Ao)/4)}}else{return Co}};_n["WASM"]["HEAPF64"]=function(Do,Eo){if(Do===void 0){Do=0}if(Eo===void 0){Eo=0}var Fo=eo(7);if(Do&&Eo){return Fo.subarray(Do/8,(Do+Eo)/8)}else{return Fo}};_n["WASM"]["GetString"]=function(Go,Ho){if(!Ho){var Io=_n["WASM"].HEAPU8();var Jo=Go;while(0!==Io[Jo++]);Ho=Jo-Go-1}var Ko=_n["WASM"].HEAPU8(Go,Ho);var Lo=bo.decode(Ko);return Lo};_n["WASM"]["SetString"]=function(Mo,No){var Oo=co.encode(No);var Po=_n["WASM"].HEAPU8(Mo,Oo.byteLength);Po.set(Oo)};_n["WASM"]["EncodeString"]=function(Qo){return co.encode(Qo)};_n["WASM"]["m_pMemory"]=null;return[]});MiaokitMerge(function(Ro){if("Sisyphus"!==Ro["m_pEngine"]){return[]}var So={instance:undefined,counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],currentContext:null,currArrayBuffer:0,currElementArrayBuffer:0,offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],programInfos:{},stringCache:{},stringiCache:{},tempFixedLengthArray:[],packAlignment:4,unpackAlignment:4,init:function(){So.miniTempBuffer=new Float32Array(So.MINI_TEMP_BUFFER_SIZE);for(var qp=0;qp<So.MINI_TEMP_BUFFER_SIZE;qp++){So.miniTempBufferViews[qp]=So.miniTempBuffer.subarray(0,qp+1)}for(var qp=0;qp<32;qp++){So.tempFixedLengthArray.push(new Array(qp))}},recordError:function rp(sp){if(!So.lastError){So.lastError=sp}},getNewId:function(tp){var up=So.counter++;for(var vp=tp.length;vp<up;vp++){tp[vp]=null}return up},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(wp,xp,yp,zp){var Ap="";for(var Bp=0;Bp<xp;++Bp){var Cp;if(zp){var Dp=_o[zp+Bp*4>>2];if(Dp<0){Cp=Vo(_o[yp+Bp*4>>2])}else{Cp=Vo(_o[yp+Bp*4>>2],Dp)}}else{Cp=Vo(_o[yp+Bp*4>>2])}Ap+=Cp}return Ap},createContext:function(Ep,Fp){if(typeof Fp["majorVersion"]==="undefined"&&typeof Fp["minorVersion"]==="undefined"){if(typeof WebGL2RenderingContext!=="undefined")Fp["majorVersion"]=2;else Fp["majorVersion"]=1;Fp["minorVersion"]=0}var Gp;var Hp="?";function Ip(Kp){Hp=Kp.statusMessage||Hp}try{Ep.addEventListener("webglcontextcreationerror",Ip,false);try{if(Fp["majorVersion"]==1&&Fp["minorVersion"]==0){Gp=Ep.getContext("webgl",Fp)||Ep.getContext("experimental-webgl",Fp)}else if(Fp["majorVersion"]==2&&Fp["minorVersion"]==0){Gp=Ep.getContext("webgl2",Fp)}else{throw"Unsupported WebGL context version "+Fp["majorVersion"]+"."+Fp["minorVersion"]+"!"}}finally{Ep.removeEventListener("webglcontextcreationerror",Ip,false)}if(!Gp)throw":("}catch(Lp){Uo("Could not create canvas: "+[Hp,Lp,JSON.stringify(Fp)]);return 0}if(!Gp)return 0;var Jp=So.registerContext(Gp,Fp);return Jp},registerContext:function(Mp,Np){var Op=1;var Pp={handle:Op,attributes:Np,version:Np["majorVersion"],GLctx:Mp};function Qp(){var Rp=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return Rp?parseInt(Rp[2],10):false}Pp["supportsWebGL2EntryPoints"]=Pp.version>=2&&(Qp()===false||Qp()>=58);if(Mp.canvas)Mp.canvas.GLctxObject=Pp;So.contexts[Op]=Pp;if(typeof Np["enableExtensionsByDefault"]==="undefined"||Np["enableExtensionsByDefault"]){So.initExtensions(Pp)}if(Np["renderViaOffscreenBackBuffer"]){return 0}return Op},makeContextCurrent:function(Sp){if(!Sp){To=So.currentContext=null;return true}var Tp=So.contexts[Sp];if(!Tp){return false}To=Tp.GLctx;So.currentContext=Tp;return true},getContext:function(Up){return So.contexts[Up]},deleteContext:function(Vp){if(!Vp)return;if(So.currentContext===So.contexts[Vp])So.currentContext=null;if(typeof JSEvents==="object")JSEvents.removeAllHandlersOnTarget(So.contexts[Vp].GLctx.canvas);if(So.contexts[Vp]&&So.contexts[Vp].GLctx.canvas)So.contexts[Vp].GLctx.canvas.GLctxObject=undefined;dp(So.contexts[Vp]);So.contexts[Vp]=null},initExtensions:function(Wp){if(!Wp)Wp=So.currentContext;if(Wp.initExtensionsDone)return;Wp.initExtensionsDone=true;To=Wp.GLctx;Wp.maxVertexAttribs=To.getParameter(To.MAX_VERTEX_ATTRIBS);if(Wp.version<2){var Xp=To.getExtension("ANGLE_instanced_arrays");if(Xp){To["vertexAttribDivisor"]=function(aq,bq){Xp["vertexAttribDivisorANGLE"](aq,bq)};To["drawArraysInstanced"]=function(cq,dq,eq,fq){Xp["drawArraysInstancedANGLE"](cq,dq,eq,fq)};To["drawElementsInstanced"]=function(gq,hq,iq,jq,kq){Xp["drawElementsInstancedANGLE"](gq,hq,iq,jq,kq)}}var Yp=To.getExtension("OES_vertex_array_object");if(Yp){To["createVertexArray"]=function(){return Yp["createVertexArrayOES"]()};To["deleteVertexArray"]=function(lq){Yp["deleteVertexArrayOES"](lq)};To["bindVertexArray"]=function(mq){Yp["bindVertexArrayOES"](mq)};To["isVertexArray"]=function(nq){return Yp["isVertexArrayOES"](nq)}}var Zp=To.getExtension("WEBGL_draw_buffers");if(Zp){To["drawBuffers"]=function(oq,pq){Zp["drawBuffersWEBGL"](oq,pq)}}}To.disjointTimerQueryExt=To.getExtension("EXT_disjoint_timer_query");var $p=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"];var _p=To.getSupportedExtensions();if(_p&&_p.length>0){To.getSupportedExtensions().forEach(function(qq){if($p.indexOf(qq)!=-1){To.getExtension(qq)}})}},populateUniformTable:function(rq){var sq=So.programs[rq];So.programInfos[rq]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1};var tq=So.programInfos[rq];var uq=tq.uniforms;var vq=To.getProgramParameter(sq,To.ACTIVE_UNIFORMS);for(var wq=0;wq<vq;++wq){var xq=To.getActiveUniform(sq,wq);var yq=xq.name;tq.maxUniformLength=Math.max(tq.maxUniformLength,yq.length+1);if(yq.indexOf("]",yq.length-1)!==-1){var zq=yq.lastIndexOf("[");yq=yq.slice(0,zq)}var Aq=To.getUniformLocation(sq,yq);if(Aq!=null){var Bq=So.getNewId(So.uniforms);uq[yq]=[xq.size,Bq];So.uniforms[Bq]=Aq;for(var Cq=1;Cq<xq.size;++Cq){var Dq=yq+"["+Cq+"]";Aq=To.getUniformLocation(sq,Dq);Bq=So.getNewId(So.uniforms);So.uniforms[Bq]=Aq}}}}};var To=undefined;var Uo=console.error;var Vo=Ro["WASM"]["GetString"];var Wo=function(Eq,Fq,Gq){Ro["WASM"]["SetString"](Fq,Eq)};var Xo=undefined;var Yo=undefined;var Zo=undefined;var $o=undefined;var _o=undefined;var ap=undefined;var bp=undefined;function cp(Hq){return Ro["WASM"]["Malloc"](Hq)}function dp(Iq){Ro["WASM"]["Free"](Iq)}function ep(Jq,Kq,Lq){return Lq?+(Jq>>>0)+ +(Kq>>>0)*4294967296:+(Jq>>>0)+ +(Kq|0)*4294967296}function fp(Mq){switch(Mq){case 34962:Mq=34964;break;case 34963:Mq=34965;break;case 35051:Mq=35053;break;case 35052:Mq=35055;break;case 35982:Mq=35983;break;case 36662:Mq=36662;break;case 36663:Mq=36663;break;case 35345:Mq=35368;break}var Nq=To.getParameter(Mq);if(Nq)return Nq.name|0;else return 0}function gp(Oq){switch(Oq){case 34962:case 34963:case 36662:case 36663:case 35051:case 35052:case 35882:case 35982:case 35345:return true;default:return false}}function hp(Pq,Qq,Rq,Sq){if(!Rq){So.recordError(1281);return}var Tq=To["getIndexedParameter"](Pq,Qq);var Uq;switch(typeof Tq){case"boolean":Uq=Tq?1:0;break;case"number":Uq=Tq;break;case"object":if(Tq===null){switch(Pq){case 35983:case 35368:Uq=0;break;default:{So.recordError(1280);return}}}else if(Tq instanceof WebGLBuffer){Uq=Tq["name"]|0}else{So.recordError(1280);return}break;default:So.recordError(1280);return}switch(Sq){case"Integer64":var Vq=0;var Wq=[Uq>>>0,(Vq=Uq,+Math.abs(Vq)>=1?Vq>0?(Math.min(+Math.floor(Vq/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Vq-+(~~Vq>>>0))/4294967296)>>>0:0)];_o[Rq>>2]=Wq[0];_o[Rq+4>>2]=Wq[1];break;case"Integer":_o[Rq>>2]=Uq;break;case"Float":bp[Rq>>2]=Uq;break;case"Boolean":Xo[Rq>>0]=Uq?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+Sq}}function ip(Xq,Yq,Zq){if(!Yq){So.recordError(1281);return}var $q=undefined;switch(Xq){case 36346:$q=1;break;case 36344:if(Zq!=="Integer"&&Zq!=="Integer64"){So.recordError(1280)}return;case 34814:case 36345:$q=0;break;case 34466:var _q=To.getParameter(34467);$q=_q.length;break;case 33309:if(To.canvas.GLctxObject.version<2){So.recordError(1282);return}var ar=To.getSupportedExtensions();$q=2*ar.length;break;case 33307:case 33308:if(To.canvas.GLctxObject.version<2){So.recordError(1280);return}$q=Xq==33307?3:0;break}if($q===undefined){var br=To.getParameter(Xq);switch(typeof br){case"number":$q=br;break;case"boolean":$q=br?1:0;break;case"string":So.recordError(1280);return;case"object":if(br===null){switch(Xq){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:{$q=0;break};default:{So.recordError(1280);return}}}else if(br instanceof Float32Array||br instanceof Uint32Array||br instanceof Int32Array||br instanceof Array){for(var cr=0;cr<br.length;++cr){switch(Zq){case"Integer":_o[Yq+cr*4>>2]=br[cr];break;case"Float":bp[Yq+cr*4>>2]=br[cr];break;case"Boolean":Xo[Yq+cr>>0]=br[cr]?1:0;break;default:throw"internal glGet error, bad type: "+Zq}}return}else if(br instanceof WebGLBuffer||br instanceof WebGLProgram||br instanceof WebGLFramebuffer||br instanceof WebGLRenderbuffer||br instanceof WebGLQuery||br instanceof WebGLSampler||br instanceof WebGLSync||br instanceof WebGLTransformFeedback||br instanceof WebGLVertexArrayObject||br instanceof WebGLTexture){$q=br["name"]|0}else{So.recordError(1280);return}break;default:So.recordError(1280);return}}switch(Zq){case"Integer64":var dr=0;var er=[$q>>>0,(dr=$q,+Math.abs(dr)>=1?dr>0?(Math.min(+Math.floor(dr/4294967296),4294967295)|0)>>>0:~~+Math.ceil((dr-+(~~dr>>>0))/4294967296)>>>0:0)];_o[Yq>>2]=er[0];_o[Yq+4>>2]=er[1];break;case"Integer":_o[Yq>>2]=$q;break;case"Float":bp[Yq>>2]=$q;break;case"Boolean":Xo[Yq>>0]=$q?1:0;break;default:throw"internal glGet error, bad type: "+Zq}}function jp(fr,gr,hr,ir){if(!hr){So.recordError(1281);return}var jr=To.getUniform(So.programs[fr],So.uniforms[gr]);if(typeof jr=="number"||typeof jr=="boolean"){switch(ir){case"Integer":_o[hr>>2]=jr;break;case"Float":bp[hr>>2]=jr;break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+ir}}else{for(var kr=0;kr<jr.length;kr++){switch(ir){case"Integer":_o[hr+kr*4>>2]=jr[kr];break;case"Float":bp[hr+kr*4>>2]=jr[kr];break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+ir}}}}function kp(lr,mr,nr,or){if(!nr){So.recordError(1281);return}var pr=To.getVertexAttrib(lr,mr);if(mr==34975){_o[nr>>2]=pr["name"]}else if(typeof pr=="number"||typeof pr=="boolean"){switch(or){case"Integer":_o[nr>>2]=pr;break;case"Float":bp[nr>>2]=pr;break;case"FloatToInteger":_o[nr>>2]=Math["fround"](pr);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+or}}else{for(var qr=0;qr<pr.length;qr++){switch(or){case"Integer":_o[nr+qr*4>>2]=pr[qr];break;case"Float":bp[nr+qr*4>>2]=pr[qr];break;case"FloatToInteger":_o[nr+qr*4>>2]=Math["fround"](pr[qr]);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+or}}}}function lp(rr,sr,tr,ur){function vr(yr,zr){return Math.floor((yr+zr-1)/zr)*zr}var wr=rr*tr;var xr=vr(wr,ur);return sr<=0?0:(sr-1)*xr+wr}function mp(Ar,Br,Cr,Dr,Er,Fr){var Gr;var Hr;switch(Br){case 6406:case 6409:case 6402:case 6403:case 36244:Hr=1;break;case 6410:case 33319:case 33320:Hr=2;break;case 6407:case 35904:case 36248:Hr=3;break;case 6408:case 35906:case 36249:Hr=4;break;default:So.recordError(1280);return null}switch(Ar){case 5121:case 5120:Gr=Hr*1;break;case 5123:case 36193:case 5131:case 5122:Gr=Hr*2;break;case 5125:case 5126:case 5124:Gr=Hr*4;break;case 34042:case 35902:case 33640:case 35899:case 34042:Gr=4;break;case 33635:case 32819:case 32820:Gr=2;break;default:So.recordError(1280);return null}var Ir=lp(Cr,Dr,Gr,So.unpackAlignment);switch(Ar){case 5120:return Xo.subarray(Er,Er+Ir);case 5121:return Yo.subarray(Er,Er+Ir);case 5122:return Zo.subarray(Er>>1,Er+Ir>>1);case 5124:return _o.subarray(Er>>2,Er+Ir>>2);case 5126:return bp.subarray(Er>>2,Er+Ir>>2);case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return ap.subarray(Er>>2,Er+Ir>>2);case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return $o.subarray(Er>>1,Er+Ir>>1);default:So.recordError(1280);return null}}function np(Jr){switch(Jr){case 5120:return Xo;case 5121:return Yo;case 5122:return Zo;case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return $o;case 5124:return _o;case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return ap;case 5126:return bp;default:return null}}function op(Kr){switch(Kr){case 5120:case 5121:return 0;case 5122:case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return 1;case 5124:case 5126:case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return 2;default:return 0}}var pp=function(){function Lr(){this.Ctx=undefined}Lr.prototype.FlushHeap=function(){Xo=Ro["WASM"]["HEAP8"]();Yo=Ro["WASM"]["HEAPU8"]();Zo=Ro["WASM"]["HEAP16"]();$o=Ro["WASM"]["HEAPU16"]();_o=Ro["WASM"]["HEAP32"]();ap=Ro["WASM"]["HEAPU32"]();bp=Ro["WASM"]["HEAPF32"]()};Lr.prototype.CreateContext=function(Mr,Nr){Nr=Nr||{majorVersion:1,minorVersion:0,alpha:0,depth:1,stencil:0,antialias:1,premultipliedAlpha:0,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:0,proxyContextToMainThread:0,renderViaOffscreenBackBuffer:0};if(Nr["explicitSwapControl"]){return 0}So.init();var Or=So.createContext(Mr,Nr);var Pr=So.makeContextCurrent(Or);this.Ctx=To;return Pr?0:-5};Lr.prototype.DestroyContext=function(){So.deleteContext(So.currentContext?So.currentContext.handle:0)};Lr.prototype.GetTextureByHandle=function(Qr){return Qr?So.textures[Qr]:null};Lr.prototype.RegisterTexture=function(Rr){var Sr=So.getNewId(So.textures);Rr.name=Sr;So.textures[Sr]=Rr;return Sr};Lr.prototype._glActiveTexture=function(Tr){To["activeTexture"](Tr)};Lr.prototype._glAttachShader=function(Ur,Vr){To.attachShader(So.programs[Ur],So.shaders[Vr])};Lr.prototype._glBeginQuery=function(Wr,Xr){To["beginQuery"](Wr,Xr?So.queries[Xr]:null)};Lr.prototype._glBeginTransformFeedback=function(Yr){To["beginTransformFeedback"](Yr)};Lr.prototype._glBindAttribLocation=function(Zr,$r,_r){_r=Vo(_r);To.bindAttribLocation(So.programs[Zr],$r,_r)};Lr.prototype._glBindBuffer=function(as,bs){var cs=bs?So.buffers[bs]:null;if(as==35051){To.currentPixelPackBufferBinding=bs}else if(as==35052){To.currentPixelUnpackBufferBinding=bs}To.bindBuffer(as,cs)};Lr.prototype._glBindBufferBase=function(ds,es,fs){var gs=fs?So.buffers[fs]:null;To["bindBufferBase"](ds,es,gs)};Lr.prototype._glBindBufferRange=function(hs,is,js,ks,ls){var ms=js?So.buffers[js]:null;To["bindBufferRange"](hs,is,ms,ks,ls)};Lr.prototype._glBindFramebuffer=function(ns,os){To.bindFramebuffer(ns,os?So.framebuffers[os]:null)};Lr.prototype._glBindRenderbuffer=function(ps,qs){To.bindRenderbuffer(ps,qs?So.renderbuffers[qs]:null)};Lr.prototype._glBindSampler=function(rs,ss){To["bindSampler"](rs,ss?So.samplers[ss]:null)};Lr.prototype._glBindTexture=function(ts,us){To.bindTexture(ts,us?So.textures[us]:null)};Lr.prototype._glBindTransformFeedback=function(vs,ws){var xs=ws?So.transformFeedbacks[ws]:null;if(ws&&!xs){So.recordError(1282);return}To["bindTransformFeedback"](vs,xs)};Lr.prototype._glBindVertexArray=function(ys){To["bindVertexArray"](So.vaos[ys])};Lr.prototype._glBlendEquation=function(zs){To["blendEquation"](zs)};Lr.prototype._glBlendEquationSeparate=function(As,Bs){To["blendEquationSeparate"](As,Bs)};Lr.prototype._glBlendFuncSeparate=function(Cs,Ds,Es,Fs){To["blendFuncSeparate"](Cs,Ds,Es,Fs)};Lr.prototype._glBlitFramebuffer=function(Gs,Hs,Is,Js,Ks,Ls,Ms,Ns,Os,Ps){To["blitFramebuffer"](Gs,Hs,Is,Js,Ks,Ls,Ms,Ns,Os,Ps)};Lr.prototype._glBufferData=function(Qs,Rs,Ss,Ts){if(!Ss){To.bufferData(Qs,Rs,Ts)}else{if(So.currentContext.supportsWebGL2EntryPoints){To.bufferData(Qs,Yo,Ts,Ss,Rs);return}To.bufferData(Qs,Yo.subarray(Ss,Ss+Rs),Ts)}};Lr.prototype._glBufferSubData=function(Us,Vs,Ws,Xs){if(So.currentContext.supportsWebGL2EntryPoints){To.bufferSubData(Us,Vs,Yo,Xs,Ws);return}To.bufferSubData(Us,Vs,Yo.subarray(Xs,Xs+Ws))};Lr.prototype._glCheckFramebufferStatus=function(Ys){return To["checkFramebufferStatus"](Ys)};Lr.prototype._glClear=function(Zs){To["clear"](Zs)};Lr.prototype._glClearColor=function($s,_s,at,bt){To["clearColor"]($s,_s,at,bt)};Lr.prototype._glClearDepthf=function(ct){To["clearDepth"](ct)};Lr.prototype._glClearStencil=function(dt){To["clearStencil"](dt)};Lr.prototype._glClientWaitSync=function(et,ft,gt,ht){gt=gt>>>0;ht=ht>>>0;var it=gt==4294967295&&ht==4294967295?-1:ep(gt,ht,true);return To.clientWaitSync(So.syncs[et],ft,it)};Lr.prototype._glColorMask=function(jt,kt,lt,mt){To.colorMask(!!jt,!!kt,!!lt,!!mt)};Lr.prototype._glCompileShader=function(nt){To.compileShader(So.shaders[nt])};Lr.prototype._glCompressedTexImage2D=function(ot,pt,qt,rt,st,tt,ut,vt){if(So.currentContext.supportsWebGL2EntryPoints){To["compressedTexImage2D"](ot,pt,qt,rt,st,tt,Yo,vt,ut);return}To["compressedTexImage2D"](ot,pt,qt,rt,st,tt,vt?Yo.subarray(vt,vt+ut):null)};Lr.prototype._glCompressedTexSubImage2D=function(wt,xt,yt,zt,At,Bt,Ct,Dt,Et){if(So.currentContext.supportsWebGL2EntryPoints){To["compressedTexSubImage2D"](wt,xt,yt,zt,At,Bt,Ct,Yo,Et,Dt);return}To["compressedTexSubImage2D"](wt,xt,yt,zt,At,Bt,Ct,Et?Yo.subarray(Et,Et+Dt):null)};Lr.prototype._glCompressedTexSubImage3D=function(Ft,Gt,Ht,It,Jt,Kt,Lt,Mt,Nt,Ot,Pt){if(So.currentContext.supportsWebGL2EntryPoints){To["compressedTexSubImage3D"](Ft,Gt,Ht,It,Jt,Kt,Lt,Mt,Nt,Yo,Pt,Ot)}else{To["compressedTexSubImage3D"](Ft,Gt,Ht,It,Jt,Kt,Lt,Mt,Nt,Pt?Yo.subarray(Pt,Pt+Ot):null)}};Lr.prototype._glCopyBufferSubData=function(Qt,Rt,St,Tt,Ut){To["copyBufferSubData"](Qt,Rt,St,Tt,Ut)};Lr.prototype._glCopyTexImage2D=function(Vt,Wt,Xt,Yt,Zt,$t,_t,au){To["copyTexImage2D"](Vt,Wt,Xt,Yt,Zt,$t,_t,au)};Lr.prototype._glCopyTexSubImage2D=function(bu,cu,du,eu,fu,gu,hu,iu){To["copyTexSubImage2D"](bu,cu,du,eu,fu,gu,hu,iu)};Lr.prototype._glCreateProgram=function(){var ju=So.getNewId(So.programs);var ku=To.createProgram();ku.name=ju;So.programs[ju]=ku;return ju};Lr.prototype._glCreateShader=function(lu){var mu=So.getNewId(So.shaders);So.shaders[mu]=To.createShader(lu);return mu};Lr.prototype._glCullFace=function(nu){To["cullFace"](nu)};Lr.prototype._glDeleteBuffers=function(ou,pu){for(var qu=0;qu<ou;qu++){var ru=_o[pu+qu*4>>2];var su=So.buffers[ru];if(!su)continue;To.deleteBuffer(su);su.name=0;So.buffers[ru]=null;if(ru==So.currArrayBuffer)So.currArrayBuffer=0;if(ru==So.currElementArrayBuffer)So.currElementArrayBuffer=0}};Lr.prototype._glDeleteFramebuffers=function(tu,uu){for(var vu=0;vu<tu;++vu){var wu=_o[uu+vu*4>>2];var xu=So.framebuffers[wu];if(!xu)continue;To.deleteFramebuffer(xu);xu.name=0;So.framebuffers[wu]=null}};Lr.prototype._glDeleteProgram=function(yu){if(!yu)return;var zu=So.programs[yu];if(!zu){So.recordError(1281);return}To.deleteProgram(zu);zu.name=0;So.programs[yu]=null;So.programInfos[yu]=null};Lr.prototype._glDeleteQueries=function(Au,Bu){for(var Cu=0;Cu<Au;Cu++){var Du=_o[Bu+Cu*4>>2];var Eu=So.queries[Du];if(!Eu)continue;To["deleteQuery"](Eu);So.queries[Du]=null}};Lr.prototype._glDeleteRenderbuffers=function(Fu,Gu){for(var Hu=0;Hu<Fu;Hu++){var Iu=_o[Gu+Hu*4>>2];var Ju=So.renderbuffers[Iu];if(!Ju)continue;To.deleteRenderbuffer(Ju);Ju.name=0;So.renderbuffers[Iu]=null}};Lr.prototype._glDeleteSamplers=function(Ku,Lu){for(var Mu=0;Mu<Ku;Mu++){var Nu=_o[Lu+Mu*4>>2];var Ou=So.samplers[Nu];if(!Ou)continue;To["deleteSampler"](Ou);Ou.name=0;So.samplers[Nu]=null}};Lr.prototype._glDeleteShader=function(Pu){if(!Pu)return;var Qu=So.shaders[Pu];if(!Qu){So.recordError(1281);return}To.deleteShader(Qu);So.shaders[Pu]=null};Lr.prototype._glDeleteSync=function(Ru){if(!Ru)return;var Su=So.syncs[Ru];if(!Su){So.recordError(1281);return}To.deleteSync(Su);Su.name=0;So.syncs[Ru]=null};Lr.prototype._glDeleteTextures=function(Tu,Uu){for(var Vu=0;Vu<Tu;Vu++){var Wu=_o[Uu+Vu*4>>2];var Xu=So.textures[Wu];if(!Xu)continue;To.deleteTexture(Xu);Xu.name=0;So.textures[Wu]=null}};Lr.prototype._glDeleteTransformFeedbacks=function(Yu,Zu){for(var $u=0;$u<Yu;$u++){var _u=_o[Zu+$u*4>>2];var av=So.transformFeedbacks[_u];if(!av)continue;To["deleteTransformFeedback"](av);av.name=0;So.transformFeedbacks[_u]=null}};Lr.prototype._glDeleteVertexArrays=function(bv,cv){for(var dv=0;dv<bv;dv++){var ev=_o[cv+dv*4>>2];To["deleteVertexArray"](So.vaos[ev]);So.vaos[ev]=null}};Lr.prototype._glDepthFunc=function(fv){To["depthFunc"](fv)};Lr.prototype._glDepthMask=function(gv){To.depthMask(!!gv)};Lr.prototype._glDetachShader=function(hv,iv){To.detachShader(So.programs[hv],So.shaders[iv])};Lr.prototype._glDisable=function(jv){To["disable"](jv)};Lr.prototype._glDisableVertexAttribArray=function(kv){To.disableVertexAttribArray(kv)};Lr.prototype._glDrawArrays=function(lv,mv,nv){To.drawArrays(lv,mv,nv)};Lr.prototype._glDrawArraysInstanced=function(ov,pv,qv,rv){To["drawArraysInstanced"](ov,pv,qv,rv)};Lr.prototype._glDrawBuffers=function(sv,tv){var uv=So.tempFixedLengthArray[sv];for(var vv=0;vv<sv;vv++){uv[vv]=_o[tv+vv*4>>2]}To["drawBuffers"](uv)};Lr.prototype._glDrawElements=function(wv,xv,yv,zv){To.drawElements(wv,xv,yv,zv)};Lr.prototype._glDrawElementsInstanced=function(Av,Bv,Cv,Dv,Ev){To["drawElementsInstanced"](Av,Bv,Cv,Dv,Ev)};Lr.prototype._glEnable=function(Fv){To["enable"](Fv)};Lr.prototype._glEnableVertexAttribArray=function(Gv){To.enableVertexAttribArray(Gv)};Lr.prototype._glEndQuery=function(Hv){To["endQuery"](Hv)};Lr.prototype._glEndTransformFeedback=function(){To["endTransformFeedback"]()};Lr.prototype._glFenceSync=function(Iv,Jv){var Kv=To.fenceSync(Iv,Jv);if(Kv){var Lv=So.getNewId(So.syncs);Kv.name=Lv;So.syncs[Lv]=Kv;return Lv}else{return 0}};Lr.prototype._glFinish=function(){To["finish"]()};Lr.prototype._glFlush=function(){To["flush"]()};Lr.prototype._glFlushMappedBufferRange=function(Mv,Nv,Ov){if(!gp(Mv)){So.recordError(1280);Uo("GL_INVALID_ENUM in glFlushMappedBufferRange");return}var Pv=So.mappedBuffers[fp(Mv)];if(!Pv){So.recordError(1282);Uo("buffer was never mapped in glFlushMappedBufferRange");return}if(!(Pv.access&16)){So.recordError(1282);Uo("buffer was not mapped with GL_MAP_FLUSH_EXPLICIT_BIT in glFlushMappedBufferRange");return}if(Nv<0||Ov<0||Nv+Ov>Pv.length){So.recordError(1281);Uo("invalid range in glFlushMappedBufferRange");return}To.bufferSubData(Mv,Pv.offset,Yo.subarray(Pv.mem+Nv,Pv.mem+Nv+Ov))};Lr.prototype._glFramebufferRenderbuffer=function(Qv,Rv,Sv,Tv){To.framebufferRenderbuffer(Qv,Rv,Sv,So.renderbuffers[Tv])};Lr.prototype._glFramebufferTexture2D=function(Uv,Vv,Wv,Xv,Yv){To.framebufferTexture2D(Uv,Vv,Wv,So.textures[Xv],Yv)};Lr.prototype._glFramebufferTextureLayer=function(Zv,$v,_v,aw,bw){To.framebufferTextureLayer(Zv,$v,So.textures[_v],aw,bw)};Lr.prototype._glFrontFace=function(cw){To["frontFace"](cw)};Lr.prototype._glGenBuffers=function(dw,ew){for(var fw=0;fw<dw;fw++){var gw=To.createBuffer();if(!gw){So.recordError(1282);while(fw<dw)_o[ew+fw++*4>>2]=0;return}var hw=So.getNewId(So.buffers);gw.name=hw;So.buffers[hw]=gw;_o[ew+fw*4>>2]=hw}};Lr.prototype._glGenFramebuffers=function(iw,jw){for(var kw=0;kw<iw;++kw){var lw=To.createFramebuffer();if(!lw){So.recordError(1282);while(kw<iw)_o[jw+kw++*4>>2]=0;return}var mw=So.getNewId(So.framebuffers);lw.name=mw;So.framebuffers[mw]=lw;_o[jw+kw*4>>2]=mw}};Lr.prototype._glGenQueries=function(nw,ow){for(var pw=0;pw<nw;pw++){var qw=To["createQuery"]();if(!qw){So.recordError(1282);while(pw<nw)_o[ow+pw++*4>>2]=0;return}var rw=So.getNewId(So.queries);qw.name=rw;So.queries[rw]=qw;_o[ow+pw*4>>2]=rw}};Lr.prototype._glGenRenderbuffers=function(sw,tw){for(var uw=0;uw<sw;uw++){var vw=To.createRenderbuffer();if(!vw){So.recordError(1282);while(uw<sw)_o[tw+uw++*4>>2]=0;return}var ww=So.getNewId(So.renderbuffers);vw.name=ww;So.renderbuffers[ww]=vw;_o[tw+uw*4>>2]=ww}};Lr.prototype._glGenSamplers=function(xw,yw){for(var zw=0;zw<xw;zw++){var Aw=To["createSampler"]();if(!Aw){So.recordError(1282);while(zw<xw)_o[yw+zw++*4>>2]=0;return}var Bw=So.getNewId(So.samplers);Aw.name=Bw;So.samplers[Bw]=Aw;_o[yw+zw*4>>2]=Bw}};Lr.prototype._glGenTextures=function(Cw,Dw){for(var Ew=0;Ew<Cw;Ew++){var Fw=To.createTexture();if(!Fw){So.recordError(1282);while(Ew<Cw)_o[Dw+Ew++*4>>2]=0;return}var Gw=So.getNewId(So.textures);Fw.name=Gw;So.textures[Gw]=Fw;_o[Dw+Ew*4>>2]=Gw}};Lr.prototype._glGenTransformFeedbacks=function(Hw,Iw){for(var Jw=0;Jw<Hw;Jw++){var Kw=To["createTransformFeedback"]();if(!Kw){So.recordError(1282);while(Jw<Hw)_o[Iw+Jw++*4>>2]=0;return}var Lw=So.getNewId(So.transformFeedbacks);Kw.name=Lw;So.transformFeedbacks[Lw]=Kw;_o[Iw+Jw*4>>2]=Lw}};Lr.prototype._glGenVertexArrays=function(Mw,Nw){for(var Ow=0;Ow<Mw;Ow++){var Pw=To["createVertexArray"]();if(!Pw){So.recordError(1282);while(Ow<Mw)_o[Nw+Ow++*4>>2]=0;return}var Qw=So.getNewId(So.vaos);Pw.name=Qw;So.vaos[Qw]=Pw;_o[Nw+Ow*4>>2]=Qw}};Lr.prototype._glGenerateMipmap=function(Rw){To["generateMipmap"](Rw)};Lr.prototype._glGetActiveAttrib=function(Sw,Tw,Uw,Vw,Ww,Xw,Yw){Sw=So.programs[Sw];var Zw=To.getActiveAttrib(Sw,Tw);if(!Zw)return;if(Uw>0&&Yw){var $w=Wo(Zw.name,Yw,Uw);if(Vw)_o[Vw>>2]=$w}else{if(Vw)_o[Vw>>2]=0}if(Ww)_o[Ww>>2]=Zw.size;if(Xw)_o[Xw>>2]=Zw.type};Lr.prototype._glGetActiveUniform=function(_w,ax,bx,cx,dx,ex,fx){_w=So.programs[_w];var gx=To.getActiveUniform(_w,ax);if(!gx)return;if(bx>0&&fx){var hx=Wo(gx.name,fx,bx);if(cx)_o[cx>>2]=hx}else{if(cx)_o[cx>>2]=0}if(dx)_o[dx>>2]=gx.size;if(ex)_o[ex>>2]=gx.type};Lr.prototype._glGetActiveUniformBlockName=function(ix,jx,kx,lx,mx){ix=So.programs[ix];var nx=To["getActiveUniformBlockName"](ix,jx);if(!nx)return;if(mx&&kx>0){var ox=Wo(nx,mx,kx);if(lx)_o[lx>>2]=ox}else{if(lx)_o[lx>>2]=0}};Lr.prototype._glGetActiveUniformBlockiv=function(px,qx,rx,sx){if(!sx){So.recordError(1281);return}px=So.programs[px];switch(rx){case 35393:var tx=To["getActiveUniformBlockName"](px,qx);_o[sx>>2]=tx.length+1;return;default:var ux=To["getActiveUniformBlockParameter"](px,qx,rx);if(!ux)return;if(typeof ux=="number"){_o[sx>>2]=ux}else{for(var vx=0;vx<ux.length;vx++){_o[sx+vx*4>>2]=ux[vx]}}}};Lr.prototype._glGetActiveUniformsiv=function(wx,xx,yx,zx,Ax){if(!Ax){So.recordError(1281);return}if(xx>0&&yx==0){So.recordError(1281);return}wx=So.programs[wx];var Bx=[];for(var Cx=0;Cx<xx;Cx++){Bx.push(_o[yx+Cx*4>>2])}var Dx=To["getActiveUniforms"](wx,Bx,zx);if(!Dx)return;var Ex=Dx.length;for(var Cx=0;Cx<Ex;Cx++){_o[Ax+Cx*4>>2]=Dx[Cx]}};Lr.prototype._glGetAttribLocation=function(Fx,Gx){return To.getAttribLocation(So.programs[Fx],Vo(Gx))};Lr.prototype._glGetError=function(){if(So.lastError){var Hx=So.lastError;So.lastError=0;return Hx}else{return To.getError()}};Lr.prototype._glGetFramebufferAttachmentParameteriv=function(Ix,Jx,Kx,Lx){var Mx=To.getFramebufferAttachmentParameter(Ix,Jx,Kx);if(Mx instanceof WebGLRenderbuffer||Mx instanceof WebGLTexture){Mx=Mx["name"]|0}_o[Lx>>2]=Mx};Lr.prototype._glGetIntegeri_v=function(Nx,Ox,Px){hp(Nx,Ox,Px,"Integer")};Lr.prototype._glGetIntegerv=function(Qx,Rx){ip(Qx,Rx,"Integer")};Lr.prototype._glGetInternalformativ=function(Sx,Tx,Ux,Vx,Wx){if(Vx<0){So.recordError(1281);return}var Xx=To["getInternalformatParameter"](Sx,Tx,32937);if(!Xx){So.recordError(1280);return}switch(Ux){case 32937:var Yx=Math.min(Vx,Xx.length);for(var Zx=0;Zx<Yx;Zx++){var $x=Xx[Zx];_o[Wx+Zx*4>>2]=$x}break;case 37760:if(Vx>1){var $x=Xx.length;_o[Wx>>2]=$x}break;default:So.recordError(1280)}};Lr.prototype._glGetProgramBinary=function(_x,ay,by,cy,dy){So.recordError(1282)};Lr.prototype._glGetProgramInfoLog=function(ey,fy,gy,hy){var iy=To.getProgramInfoLog(So.programs[ey]);if(iy===null)iy="(unknown error)";if(fy>0&&hy){var jy=Wo(iy,hy,fy);if(gy)_o[gy>>2]=jy}else{if(gy)_o[gy>>2]=0}};Lr.prototype._glGetProgramiv=function(ky,ly,my){if(!my){So.recordError(1281);return}if(ky>=So.counter){So.recordError(1281);return}var ny=So.programInfos[ky];if(!ny){So.recordError(1282);return}if(ly==35716){var oy=To.getProgramInfoLog(So.programs[ky]);if(oy===null)oy="(unknown error)";_o[my>>2]=oy.length+1}else if(ly==35719){_o[my>>2]=ny.maxUniformLength}else if(ly==35722){if(ny.maxAttributeLength==-1){ky=So.programs[ky];var py=To.getProgramParameter(ky,To.ACTIVE_ATTRIBUTES);ny.maxAttributeLength=0;for(var qy=0;qy<py;++qy){var ry=To.getActiveAttrib(ky,qy);ny.maxAttributeLength=Math.max(ny.maxAttributeLength,ry.name.length+1)}}_o[my>>2]=ny.maxAttributeLength}else if(ly==35381){if(ny.maxUniformBlockNameLength==-1){ky=So.programs[ky];var sy=To.getProgramParameter(ky,To.ACTIVE_UNIFORM_BLOCKS);ny.maxUniformBlockNameLength=0;for(var qy=0;qy<sy;++qy){var ty=To.getActiveUniformBlockName(ky,qy);ny.maxUniformBlockNameLength=Math.max(ny.maxUniformBlockNameLength,ty.length+1)}}_o[my>>2]=ny.maxUniformBlockNameLength}else{_o[my>>2]=To.getProgramParameter(So.programs[ky],ly)}};Lr.prototype._glGetRenderbufferParameteriv=function(uy,vy,wy){if(!wy){So.recordError(1281);return}_o[wy>>2]=To.getRenderbufferParameter(uy,vy)};Lr.prototype._glGetShaderInfoLog=function(xy,yy,zy,Ay){var By=To.getShaderInfoLog(So.shaders[xy]);if(By===null)By="(unknown error)";if(yy>0&&Ay){var Cy=Wo(By,Ay,yy);if(zy)_o[zy>>2]=Cy}else{if(zy)_o[zy>>2]=0}};Lr.prototype._glGetShaderPrecisionFormat=function(Dy,Ey,Fy,Gy){var Hy=To.getShaderPrecisionFormat(Dy,Ey);_o[Fy>>2]=Hy.rangeMin;_o[Fy+4>>2]=Hy.rangeMax;_o[Gy>>2]=Hy.precision};Lr.prototype._glGetShaderSource=function(Iy,Jy,Ky,Ly){var My=To.getShaderSource(So.shaders[Iy]);if(!My)return;if(Jy>0&&Ly){var Ny=Wo(My,Ly,Jy);if(Ky)_o[Ky>>2]=Ny}else{if(Ky)_o[Ky>>2]=0}};Lr.prototype._glGetShaderiv=function(Oy,Py,Qy){if(!Qy){So.recordError(1281);return}if(Py==35716){var Ry=To.getShaderInfoLog(So.shaders[Oy]);if(Ry===null)Ry="(unknown error)";_o[Qy>>2]=Ry.length+1}else if(Py==35720){var Sy=To.getShaderSource(So.shaders[Oy]);var Ty=Sy===null||Sy.length==0?0:Sy.length+1;_o[Qy>>2]=Ty}else{_o[Qy>>2]=To.getShaderParameter(So.shaders[Oy],Py)}};Lr.prototype._glGetString=function(Uy){Uo("unsupported glGetString");return 0};Lr.prototype._glGetStringi=function(Vy,Wy){Uo("unsupported glGetStringi");return 0};Lr.prototype._glGetTexParameteriv=function(Xy,Yy,Zy){if(!Zy){So.recordError(1281);return}_o[Zy>>2]=To.getTexParameter(Xy,Yy)};Lr.prototype._glGetUniformBlockIndex=function($y,_y){$y=So.programs[$y];_y=Vo(_y);return To["getUniformBlockIndex"]($y,_y)};Lr.prototype._glGetUniformIndices=function(az,bz,cz,dz){if(!dz){So.recordError(1281);return}if(bz>0&&(cz==0||dz==0)){So.recordError(1281);return}az=So.programs[az];var ez=[];for(var fz=0;fz<bz;fz++)ez.push(Vo(_o[cz+fz*4>>2]));var gz=To["getUniformIndices"](az,ez);if(!gz)return;var hz=gz.length;for(var fz=0;fz<hz;fz++){_o[dz+fz*4>>2]=gz[fz]}};Lr.prototype._glGetUniformLocation=function(iz,jz){jz=Vo(jz);var kz=0;if(jz.indexOf("]",jz.length-1)!==-1){var lz=jz.lastIndexOf("[");var mz=jz.slice(lz+1,-1);if(mz.length>0){kz=parseInt(mz);if(kz<0){return-1}}jz=jz.slice(0,lz)}var nz=So.programInfos[iz];if(!nz){return-1}var oz=nz.uniforms;var pz=oz[jz];if(pz&&kz<pz[0]){return pz[1]+kz}else{return-1}};Lr.prototype._glGetUniformiv=function(qz,rz,sz){jp(qz,rz,sz,"Integer")};Lr.prototype._glGetVertexAttribiv=function(tz,uz,vz){kp(tz,uz,vz,"FloatToInteger")};Lr.prototype._glInvalidateFramebuffer=function(wz,xz,yz){var zz=So.tempFixedLengthArray[xz];for(var Az=0;Az<xz;Az++){zz[Az]=_o[yz+Az*4>>2]}To["invalidateFramebuffer"](wz,zz)};Lr.prototype._glIsEnabled=function(Bz){return To["isEnabled"](Bz)};Lr.prototype._glIsVertexArray=function(Cz){var Dz=So.vaos[Cz];if(!Dz)return 0;return To["isVertexArray"](Dz)};Lr.prototype._glLinkProgram=function(Ez){To.linkProgram(So.programs[Ez]);So.programInfos[Ez]=null;So.populateUniformTable(Ez)};Lr.prototype._glMapBufferRange=function(Fz,Gz,Hz,Iz){if(Iz!=26&&Iz!=10){Uo("glMapBufferRange is only supported when access is MAP_WRITE|INVALIDATE_BUFFER");return 0}if(!gp(Fz)){So.recordError(1280);Uo("GL_INVALID_ENUM in glMapBufferRange");return 0}var Jz=cp(Hz);if(!Jz)return 0;So.mappedBuffers[fp(Fz)]={offset:Gz,length:Hz,mem:Jz,access:Iz};return Jz};Lr.prototype._glPixelStorei=function(Kz,Lz){if(Kz==3333){So.packAlignment=Lz}else if(Kz==3317){So.unpackAlignment=Lz}To.pixelStorei(Kz,Lz)};Lr.prototype._glPolygonOffset=function(Mz,Nz){To["polygonOffset"](Mz,Nz)};Lr.prototype._glProgramBinary=function(Oz,Pz,Qz,Rz){So.recordError(1280)};Lr.prototype._glProgramParameteri=function(Sz,Tz,Uz){So.recordError(1280)};Lr.prototype._glReadBuffer=function(Vz){To["readBuffer"](Vz)};Lr.prototype._glReadPixels=function(Wz,Xz,Yz,Zz,$z,_z,aA){if(So.currentContext.supportsWebGL2EntryPoints){if(To.currentPixelPackBufferBinding){To.readPixels(Wz,Xz,Yz,Zz,$z,_z,aA)}else{To.readPixels(Wz,Xz,Yz,Zz,$z,_z,np(_z),aA>>op(_z))}return}var bA=mp(_z,$z,Yz,Zz,aA,$z);if(!bA){So.recordError(1280);return}To.readPixels(Wz,Xz,Yz,Zz,$z,_z,bA)};Lr.prototype._glRenderbufferStorage=function(cA,dA,eA,fA){To["renderbufferStorage"](cA,dA,eA,fA)};Lr.prototype._glRenderbufferStorageMultisample=function(gA,hA,iA,jA,kA){To["renderbufferStorageMultisample"](gA,hA,iA,jA,kA)};Lr.prototype._glSamplerParameteri=function(lA,mA,nA){To["samplerParameteri"](lA?So.samplers[lA]:null,mA,nA)};Lr.prototype._glScissor=function(oA,pA,qA,rA){To["scissor"](oA,pA,qA,rA)};Lr.prototype._glShaderSource=function(sA,tA,uA,vA){var wA=So.getSource(sA,tA,uA,vA);To.shaderSource(So.shaders[sA],wA)};Lr.prototype._glStencilFuncSeparate=function(xA,yA,zA,AA){To["stencilFuncSeparate"](xA,yA,zA,AA)};Lr.prototype._glStencilMask=function(BA){To["stencilMask"](BA)};Lr.prototype._glStencilOpSeparate=function(CA,DA,EA,FA){To["stencilOpSeparate"](CA,DA,EA,FA)};Lr.prototype._glTexImage2D=function(GA,HA,IA,JA,KA,LA,MA,NA,OA){if(So.currentContext.supportsWebGL2EntryPoints){if(To.currentPixelUnpackBufferBinding){To.texImage2D(GA,HA,IA,JA,KA,LA,MA,NA,OA)}else if(OA!=0){To.texImage2D(GA,HA,IA,JA,KA,LA,MA,NA,np(NA),OA>>op(NA))}else{To.texImage2D(GA,HA,IA,JA,KA,LA,MA,NA,null)}return}var PA=null;if(OA)PA=mp(NA,MA,JA,KA,OA,IA);To.texImage2D(GA,HA,IA,JA,KA,LA,MA,NA,PA)};Lr.prototype._glTexImage3D=function(QA,RA,SA,TA,UA,VA,WA,XA,YA,ZA){if(To.currentPixelUnpackBufferBinding){To["texImage3D"](QA,RA,SA,TA,UA,VA,WA,XA,YA,ZA)}else if(ZA!=0){To["texImage3D"](QA,RA,SA,TA,UA,VA,WA,XA,YA,np(YA),ZA>>op(YA))}else{To["texImage3D"](QA,RA,SA,TA,UA,VA,WA,XA,YA,null)}};Lr.prototype._glTexParameterf=function($A,_A,aB){To["texParameterf"]($A,_A,aB)};Lr.prototype._glTexParameteri=function(bB,cB,dB){To["texParameteri"](bB,cB,dB)};Lr.prototype._glTexParameteriv=function(eB,fB,gB){var hB=_o[gB>>2];To.texParameteri(eB,fB,hB)};Lr.prototype._glTexStorage2D=function(iB,jB,kB,lB,mB){To["texStorage2D"](iB,jB,kB,lB,mB)};Lr.prototype._glTexStorage3D=function(nB,oB,pB,qB,rB,sB){To["texStorage3D"](nB,oB,pB,qB,rB,sB)};Lr.prototype._glTexSubImage2D=function(tB,uB,vB,wB,xB,yB,zB,AB,BB){if(So.currentContext.supportsWebGL2EntryPoints){if(To.currentPixelUnpackBufferBinding){To.texSubImage2D(tB,uB,vB,wB,xB,yB,zB,AB,BB)}else if(BB!=0){To.texSubImage2D(tB,uB,vB,wB,xB,yB,zB,AB,np(AB),BB>>op(AB))}else{To.texSubImage2D(tB,uB,vB,wB,xB,yB,zB,AB,null)}return}var CB=null;if(BB)CB=mp(AB,zB,xB,yB,BB,0);To.texSubImage2D(tB,uB,vB,wB,xB,yB,zB,AB,CB)};Lr.prototype._glTexSubImage3D=function(DB,EB,FB,GB,HB,IB,JB,KB,LB,MB,NB){if(To.currentPixelUnpackBufferBinding){To["texSubImage3D"](DB,EB,FB,GB,HB,IB,JB,KB,LB,MB,NB)}else if(NB!=0){To["texSubImage3D"](DB,EB,FB,GB,HB,IB,JB,KB,LB,MB,np(MB),NB>>op(MB))}else{To["texSubImage3D"](DB,EB,FB,GB,HB,IB,JB,KB,LB,MB,null)}};Lr.prototype._glTransformFeedbackVaryings=function(OB,PB,QB,RB){OB=So.programs[OB];var SB=[];for(var TB=0;TB<PB;TB++)SB.push(Vo(_o[QB+TB*4>>2]));To["transformFeedbackVaryings"](OB,SB,RB)};Lr.prototype._glUniform1fv=function(UB,VB,WB){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform1fv(So.uniforms[UB],bp,WB>>2,VB);return}var XB;if(VB<=So.MINI_TEMP_BUFFER_SIZE){XB=So.miniTempBufferViews[VB-1];for(var YB=0;YB<VB;++YB){XB[YB]=bp[WB+4*YB>>2]}}else{XB=bp.subarray(WB>>2,WB+VB*4>>2)}To.uniform1fv(So.uniforms[UB],XB)};Lr.prototype._glUniform1i=function(ZB,$B){To.uniform1i(So.uniforms[ZB],$B)};Lr.prototype._glUniform1iv=function(_B,aC,bC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform1iv(So.uniforms[_B],_o,bC>>2,aC);return}To.uniform1iv(So.uniforms[_B],_o.subarray(bC>>2,bC+aC*4>>2))};Lr.prototype._glUniform1uiv=function(cC,dC,eC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform1uiv(So.uniforms[cC],ap,eC>>2,dC)}else{To.uniform1uiv(So.uniforms[cC],ap.subarray(eC>>2,eC+dC*4>>2))}};Lr.prototype._glUniform2fv=function(fC,gC,hC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform2fv(So.uniforms[fC],bp,hC>>2,gC*2);return}var iC;if(2*gC<=So.MINI_TEMP_BUFFER_SIZE){iC=So.miniTempBufferViews[2*gC-1];for(var jC=0;jC<2*gC;jC+=2){iC[jC]=bp[hC+4*jC>>2];iC[jC+1]=bp[hC+(4*jC+4)>>2]}}else{iC=bp.subarray(hC>>2,hC+gC*8>>2)}To.uniform2fv(So.uniforms[fC],iC)};Lr.prototype._glUniform2iv=function(kC,lC,mC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform2iv(So.uniforms[kC],_o,mC>>2,lC*2);return}To.uniform2iv(So.uniforms[kC],_o.subarray(mC>>2,mC+lC*8>>2))};Lr.prototype._glUniform2uiv=function(nC,oC,pC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform2uiv(So.uniforms[nC],ap,pC>>2,oC*2)}else{To.uniform2uiv(So.uniforms[nC],ap.subarray(pC>>2,pC+oC*8>>2))}};Lr.prototype._glUniform3fv=function(qC,rC,sC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform3fv(So.uniforms[qC],bp,sC>>2,rC*3);return}var tC;if(3*rC<=So.MINI_TEMP_BUFFER_SIZE){tC=So.miniTempBufferViews[3*rC-1];for(var uC=0;uC<3*rC;uC+=3){tC[uC]=bp[sC+4*uC>>2];tC[uC+1]=bp[sC+(4*uC+4)>>2];tC[uC+2]=bp[sC+(4*uC+8)>>2]}}else{tC=bp.subarray(sC>>2,sC+rC*12>>2)}To.uniform3fv(So.uniforms[qC],tC)};Lr.prototype._glUniform3iv=function(vC,wC,xC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform3iv(So.uniforms[vC],_o,xC>>2,wC*3);return}To.uniform3iv(So.uniforms[vC],_o.subarray(xC>>2,xC+wC*12>>2))};Lr.prototype._glUniform3uiv=function(yC,zC,AC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform3uiv(So.uniforms[yC],ap,AC>>2,zC*3)}else{To.uniform3uiv(So.uniforms[yC],ap.subarray(AC>>2,AC+zC*12>>2))}};Lr.prototype._glUniform4fv=function(BC,CC,DC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform4fv(So.uniforms[BC],bp,DC>>2,CC*4);return}var EC;if(4*CC<=So.MINI_TEMP_BUFFER_SIZE){EC=So.miniTempBufferViews[4*CC-1];for(var FC=0;FC<4*CC;FC+=4){EC[FC]=bp[DC+4*FC>>2];EC[FC+1]=bp[DC+(4*FC+4)>>2];EC[FC+2]=bp[DC+(4*FC+8)>>2];EC[FC+3]=bp[DC+(4*FC+12)>>2]}}else{EC=bp.subarray(DC>>2,DC+CC*16>>2)}To.uniform4fv(So.uniforms[BC],EC)};Lr.prototype._glUniform4iv=function(GC,HC,IC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform4iv(So.uniforms[GC],_o,IC>>2,HC*4);return}To.uniform4iv(So.uniforms[GC],_o.subarray(IC>>2,IC+HC*16>>2))};Lr.prototype._glUniform4uiv=function(JC,KC,LC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniform4uiv(So.uniforms[JC],ap,LC>>2,KC*4)}else{To.uniform4uiv(So.uniforms[JC],ap.subarray(LC>>2,LC+KC*16>>2))}};Lr.prototype._glUniformBlockBinding=function(MC,NC,OC){MC=So.programs[MC];To["uniformBlockBinding"](MC,NC,OC)};Lr.prototype._glUniformMatrix3fv=function(PC,QC,RC,SC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniformMatrix3fv(So.uniforms[PC],!!RC,bp,SC>>2,QC*9);return}var TC;if(9*QC<=So.MINI_TEMP_BUFFER_SIZE){TC=So.miniTempBufferViews[9*QC-1];for(var UC=0;UC<9*QC;UC+=9){TC[UC]=bp[SC+4*UC>>2];TC[UC+1]=bp[SC+(4*UC+4)>>2];TC[UC+2]=bp[SC+(4*UC+8)>>2];TC[UC+3]=bp[SC+(4*UC+12)>>2];TC[UC+4]=bp[SC+(4*UC+16)>>2];TC[UC+5]=bp[SC+(4*UC+20)>>2];TC[UC+6]=bp[SC+(4*UC+24)>>2];TC[UC+7]=bp[SC+(4*UC+28)>>2];TC[UC+8]=bp[SC+(4*UC+32)>>2]}}else{TC=bp.subarray(SC>>2,SC+QC*36>>2)}To.uniformMatrix3fv(So.uniforms[PC],!!RC,TC)};Lr.prototype._glUniformMatrix4fv=function(VC,WC,XC,YC){if(So.currentContext.supportsWebGL2EntryPoints){To.uniformMatrix4fv(So.uniforms[VC],!!XC,bp,YC>>2,WC*16);return}var ZC;if(16*WC<=So.MINI_TEMP_BUFFER_SIZE){ZC=So.miniTempBufferViews[16*WC-1];for(var $C=0;$C<16*WC;$C+=16){ZC[$C]=bp[YC+4*$C>>2];ZC[$C+1]=bp[YC+(4*$C+4)>>2];ZC[$C+2]=bp[YC+(4*$C+8)>>2];ZC[$C+3]=bp[YC+(4*$C+12)>>2];ZC[$C+4]=bp[YC+(4*$C+16)>>2];ZC[$C+5]=bp[YC+(4*$C+20)>>2];ZC[$C+6]=bp[YC+(4*$C+24)>>2];ZC[$C+7]=bp[YC+(4*$C+28)>>2];ZC[$C+8]=bp[YC+(4*$C+32)>>2];ZC[$C+9]=bp[YC+(4*$C+36)>>2];ZC[$C+10]=bp[YC+(4*$C+40)>>2];ZC[$C+11]=bp[YC+(4*$C+44)>>2];ZC[$C+12]=bp[YC+(4*$C+48)>>2];ZC[$C+13]=bp[YC+(4*$C+52)>>2];ZC[$C+14]=bp[YC+(4*$C+56)>>2];ZC[$C+15]=bp[YC+(4*$C+60)>>2]}}else{ZC=bp.subarray(YC>>2,YC+WC*64>>2)}To.uniformMatrix4fv(So.uniforms[VC],!!XC,ZC)};Lr.prototype._glUnmapBuffer=function(_C){if(!gp(_C)){So.recordError(1280);Uo("GL_INVALID_ENUM in glUnmapBuffer");return 0}var aD=fp(_C);var bD=So.mappedBuffers[aD];if(!bD){So.recordError(1282);Uo("buffer was never mapped in glUnmapBuffer");return 0}So.mappedBuffers[aD]=null;if(!(bD.access&16))if(So.currentContext.supportsWebGL2EntryPoints){To.bufferSubData(_C,bD.offset,Yo,bD.mem,bD.length)}else{To.bufferSubData(_C,bD.offset,Yo.subarray(bD.mem,bD.mem+bD.length))}dp(bD.mem);return 1};Lr.prototype._glUseProgram=function(cD){To.useProgram(cD?So.programs[cD]:null)};Lr.prototype._glValidateProgram=function(dD){To.validateProgram(So.programs[dD])};Lr.prototype._glVertexAttrib4f=function(eD,fD,gD,hD,iD){To["vertexAttrib4f"](eD,fD,gD,hD,iD)};Lr.prototype._glVertexAttrib4fv=function(jD,kD){To.vertexAttrib4f(jD,bp[kD>>2],bp[kD+4>>2],bp[kD+8>>2],bp[kD+12>>2])};Lr.prototype._glVertexAttribIPointer=function(lD,mD,nD,oD,pD){var qD=So.currentContext.clientBuffers[lD];if(!So.currArrayBuffer){qD.size=mD;qD.type=nD;qD.normalized=false;qD.stride=oD;qD.ptr=pD;qD.clientside=true;return}qD.clientside=false;To.vertexAttribIPointer(lD,mD,nD,oD,pD)};Lr.prototype._glVertexAttribPointer=function(rD,sD,tD,uD,vD,wD){To.vertexAttribPointer(rD,sD,tD,!!uD,vD,wD)};Lr.prototype._glViewport=function(xD,yD,zD,AD){To["viewport"](xD,yD,zD,AD)};return Lr}();So.instance=new pp;So.instance["_name"]="GL";So.instance["_textures"]=So.textures;return[So.instance]});